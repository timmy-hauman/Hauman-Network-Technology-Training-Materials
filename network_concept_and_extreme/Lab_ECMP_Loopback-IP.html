<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExtremeXOS 網路架構大師班：ECMP 與 Loopback 實戰</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Mermaid JS -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        extremePurple: '#4c2a86',
                        extremeDark: '#1a1a1a',
                        terminalBg: '#1e1e1e',
                        terminalText: '#00ff00'
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; }
        .card { background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 2rem; overflow: hidden; }
        .card-header { background: #4c2a86; color: white; padding: 1rem; font-weight: bold; display: flex; align-items: center; }
        .card-body { padding: 1.5rem; }
        .terminal { background-color: #1e1e1e; color: #d4d4d4; padding: 1rem; border-radius: 6px; font-family: 'Courier New', Courier, monospace; overflow-x: auto; margin-top: 10px; border-left: 5px solid #4c2a86; }
        .cmd { color: #4ec9b0; font-weight: bold; }
        .comment { color: #6a9955; font-style: italic; }
        .output { color: #ce9178; }
        .mermaid { display: flex; justify-content: center; margin: 20px 0; }
        
        /* Interactive Quiz Styles */
        .quiz-option { 
            padding: 10px; border: 2px solid #e5e7eb; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.2s; 
        }
        .quiz-option:hover { background-color: #f3f4f6; border-color: #4c2a86; }
        .quiz-option.correct { background-color: #d1fae5; border-color: #10b981; color: #065f46; }
        .quiz-option.wrong { background-color: #fee2e2; border-color: #ef4444; color: #991b1b; }
        .explanation { display: none; margin-top: 10px; padding: 10px; background-color: #eff6ff; border-radius: 4px; border-left: 4px solid #3b82f6; }
        
        footer { background: #1a1a1a; color: #888; text-align: center; padding: 1.5rem; margin-top: 3rem; font-size: 0.9rem; border-top: 3px solid #4c2a86; }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="bg-gradient-to-r from-gray-900 to-indigo-900 text-white p-6 shadow-lg">
        <div class="container mx-auto">
            <h1 class="text-3xl font-bold mb-2"><i class="fa-solid fa-network-wired mr-2"></i>ExtremeXOS 網路架構大師班</h1>
            <p class="text-indigo-200">主題：Loopback Interface 與 Static Route ECMP (等價多路徑路由)</p>
            <div class="mt-4 flex items-center text-sm">
                <span class="bg-purple-600 px-3 py-1 rounded-full mr-2 hidden">講師：Timmy</span>
                <span class="text-gray-300">20 年資深網路架構師</span>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 max-w-5xl">

        <!-- 1. Core Concept -->
        <section class="card" id="concept">
            <div class="card-header">
                <i class="fa-solid fa-lightbulb mr-3"></i> 一、核心概念 (Concept)
            </div>
            <div class="card-body">
                <div class="mb-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">1. Loopback Interface (迴環介面)</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-2">
                        <li><strong>一句話定義：</strong>一個邏輯上的虛擬介面，只要設備開機它就永遠處於 Up 狀態，不會因為實體線路斷線而失效。</li>
                        <li class="bg-yellow-50 p-3 rounded border border-yellow-200">
                            <strong><i class="fa-solid fa-mug-hot text-yellow-600 mr-2"></i>生活化比喻：</strong>
                            想像這是一間公司的「總機號碼」。不管哪個分機 (實體 Port) 忙線或壞掉，只要公司 (Switch) 還在運作，打總機號碼 (Loopback IP) 永遠能找到這間公司。
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">2. ECMP (Equal Cost Multi-Path)</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-2">
                        <li><strong>一句話定義：</strong>當前往同一目的地有多條「成本相同」的路徑時，路由器同時使用這些路徑來分散流量。</li>
                        <li class="bg-blue-50 p-3 rounded border border-blue-200">
                            <strong><i class="fa-solid fa-car text-blue-600 mr-2"></i>生活化比喻：</strong>
                            像是高速公路的收費站有 4 個閘道 (路徑) 同時開啟。車流 (封包) 不必排同一條隊伍，可以隨機或依照規則分配到這 4 個閘道，同時通過，速度更快且不會塞車。
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 2. Mechanism -->
        <section class="card" id="mechanism">
            <div class="card-header">
                <i class="fa-solid fa-cogs mr-3"></i> 二、運作原理 (Mechanism)
            </div>
            <div class="card-body">
                <h4 class="font-bold text-lg text-extremePurple mb-3">技術細節</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <p class="text-gray-700 mb-4">
                            <strong>Static Route ECMP</strong> 的關鍵在於路由表 (Routing Table) 中，針對同一個目的網段 (Destination Subnet)，設定了多個不同的下一跳 (Next-Hop)，且這些路徑的優先權 (Metric/Cost) 必須完全相同。
                        </p>
                        <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                            <li><strong>FIB (Forwarding Information Base)：</strong>硬體層面會根據 Hash 演算法決定封包走哪條路。</li>
                            <li><strong>Hashing 演算法：</strong>通常基於 5-Tuple (來源 IP, 目的 IP, 協定, 來源 Port, 目的 Port) 計算，確保同一條連線 (Flow) 走同一條路，避免封包亂序 (Out-of-order)。</li>
                        </ul>
                    </div>
                    <div class="bg-gray-100 p-4 rounded">
                        <h5 class="font-bold text-sm mb-2">ExtremeXOS 關鍵參數</h5>
                        <code class="text-xs text-red-600 block mb-1">enable iproute sharing</code>
                        <span class="text-xs text-gray-500 block mb-2">全域指令：開啟路由負載平衡功能。</span>
                        
                        <code class="text-xs text-red-600 block mb-1">configure iproute add [Dest] [Mask] [Gateway_1]</code>
                        <code class="text-xs text-red-600 block mb-1">configure iproute add [Dest] [Mask] [Gateway_2]</code>
                        <span class="text-xs text-gray-500">重複輸入相同的目的地，但不同的 Gateway，即自動形成 ECMP。</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. Visuals -->
        <section class="card" id="visuals">
            <div class="card-header">
                <i class="fa-solid fa-project-diagram mr-3"></i> 三、架構視覺化 (Visuals)
            </div>
            <div class="card-body">
                <p class="mb-4 text-gray-600">本架構展示 A 到 B 到 C 的串接，並在每段鏈路之間使用兩條實體線路進行 ECMP 負載平衡。目標是讓 A 能透過多重路徑訪問 C 的 Loopback IP。</p>
                
                <!-- Diagram 1: Topology -->
                <div class="border-b-2 border-gray-100 pb-6 mb-6">
                    <h4 class="text-center font-bold text-gray-700 mb-2">1. 實體與邏輯拓撲圖 (Topology)</h4>
                    <div class="mermaid">
                        graph TD
                            subgraph "Switch A (Source)"
                                A[Core-A]
                                LoopA[Loopback: 1.1.1.1/32]
                                A --- LoopA
                            end

                            subgraph "Switch B (Transit)"
                                B[Core-B]
                                LoopB[Loopback: 2.2.2.2/32]
                                B --- LoopB
                            end

                            subgraph "Switch C (Destination)"
                                C[Core-C]
                                LoopC[Loopback: 3.3.3.3/32]
                                C --- LoopC
                            end

                            %% Links between A and B
                            A == "Link 1 (VLAN 10)<br>10.1.1.0/30" ==> B
                            A == "Link 2 (VLAN 20)<br>10.1.2.0/30" ==> B

                            %% Links between B and C
                            B == "Link 3 (VLAN 30)<br>10.2.1.0/30" ==> C
                            B == "Link 4 (VLAN 40)<br>10.2.2.0/30" ==> C

                            classDef sw fill:#4c2a86,stroke:#333,stroke-width:2px,color:white;
                            classDef loop fill:#fff,stroke:#4c2a86,stroke-dasharray: 5 5;
                            class A,B,C sw;
                            class LoopA,LoopB,LoopC loop;
                    </div>
                </div>

                <!-- Diagram 2: Flow -->
                <div>
                    <h4 class="text-center font-bold text-gray-700 mb-2">2. 封包轉送流程 (Packet Flow)</h4>
                    <div class="mermaid">
                        sequenceDiagram
                            participant Host as Client (接在A)
                            participant SwA as Switch A
                            participant SwB as Switch B
                            participant SwC as Switch C

                            Note over SwA: 目的地: 3.3.3.3 (C Loopback)
                            
                            Host->>SwA: 送出封包 (Dst: 3.3.3.3)
                            
                            rect rgb(240, 240, 255)
                                Note right of SwA: 查詢 Routing Table
                                Note right of SwA: 發現 2 個 Next Hops:<br>1. 10.1.1.2 (往B path1)<br>2. 10.1.2.2 (往B path2)
                                Note right of SwA: 執行 Hash 演算法
                            end

                            alt Hash 結果 = Path 1
                                SwA->>SwB: 經由 VLAN 10 轉送
                            else Hash 結果 = Path 2
                                SwA->>SwB: 經由 VLAN 20 轉送
                            end

                            rect rgb(255, 240, 240)
                                Note right of SwB: 收到封包，查詢往 3.3.3.3
                                Note right of SwB: 發現 2 個 Next Hops:<br>1. 10.2.1.2 (往C path1)<br>2. 10.2.2.2 (往C path2)
                            end

                            alt Hash 結果 = Path A
                                SwB->>SwC: 經由 VLAN 30 轉送
                            else Hash 結果 = Path B
                                SwB->>SwC: 經由 VLAN 40 轉送
                            end

                            SwC->>SwC: 到達本機 Loopback 介面
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Use Case & Lab -->
        <section class="card" id="lab">
            <div class="card-header">
                <i class="fa-solid fa-laptop-code mr-3"></i> 四、實務應用與 Lab 演練 (Use Case & Lab)
            </div>
            <div class="card-body">
                <div class="mb-6">
                    <h4 class="font-bold text-gray-800">應用場景：高可用性骨幹網路</h4>
                    <p class="text-gray-600 text-sm mt-1">
                        在大型園區網路中，核心交換器之間通常擁有多條光纖。透過 ECMP，我們能合併頻寬並提供備援。若 Link 1 斷線，Hash 機制會自動將流量導向 Link 2，且 Loopback IP 確保管理 IP 永不改變，方便 NMS 監控。
                    </p>
                </div>

                <!-- Interactive Tabs for Lab -->
                <div class="border rounded-lg overflow-hidden">
                    <div class="bg-gray-200 flex">
                        <button class="flex-1 py-2 px-4 text-center font-bold bg-white text-extremePurple border-b-2 border-extremePurple" onclick="openTab(event, 'configA')">Switch A (Core)</button>
                        <button class="flex-1 py-2 px-4 text-center font-bold text-gray-600 hover:bg-gray-100" onclick="openTab(event, 'configB')">Switch B (Transit)</button>
                        <button class="flex-1 py-2 px-4 text-center font-bold text-gray-600 hover:bg-gray-100" onclick="openTab(event, 'configC')">Switch C (Edge)</button>
                    </div>

                    <!-- Switch A Config -->
                    <div id="configA" class="tab-content p-4 bg-gray-900">
                        <div class="terminal">
                            <div class="text-gray-400 mb-2"># Switch A Configuration - Setting up ECMP to B</div>
                            <div><span class="cmd">create vlan</span> "Loopback"</div>
                            <div><span class="cmd">configure vlan</span> "Loopback" <span class="cmd">ipaddress</span> 1.1.1.1/32</div>
                            <div><span class="cmd">enable loopback-mode vlan</span> "Loopback" <span class="comment"># 啟用 EXOS Loopback 模式</span></div>
                            <br>
                            <div><span class="comment"># 設定與 Switch B 連接的兩個 VLAN</span></div>
                            <div><span class="cmd">create vlan</span> "To-B-Link1"</div>
                            <div><span class="cmd">configure vlan</span> "To-B-Link1" <span class="cmd">tag</span> 10</div>
                            <div><span class="cmd">configure vlan</span> "To-B-Link1" <span class="cmd">ipaddress</span> 10.1.1.1/30</div>
                            <div><span class="cmd">create vlan</span> "To-B-Link2"</div>
                            <div><span class="cmd">configure vlan</span> "To-B-Link2" <span class="cmd">tag</span> 20</div>
                            <div><span class="cmd">configure vlan</span> "To-B-Link2" <span class="cmd">ipaddress</span> 10.1.2.1/30</div>
                            <br>
                            <div><span class="comment"># 開啟 ECMP 功能</span></div>
                            <div><span class="cmd">enable iproute sharing</span></div>
                            <br>
                            <div><span class="comment"># 設定 Static Route 往 C 的 Loopback (下一跳皆指向 B)</span></div>
                            <div><span class="cmd">configure iproute add</span> 3.3.3.3/32 10.1.1.2 <span class="comment"># Path 1 via VLAN 10</span></div>
                            <div><span class="cmd">configure iproute add</span> 3.3.3.3/32 10.1.2.2 <span class="comment"># Path 2 via VLAN 20</span></div>
                        </div>
                    </div>

                    <!-- Switch B Config -->
                    <div id="configB" class="tab-content p-4 bg-gray-900 hidden">
                        <div class="terminal">
                            <div class="text-gray-400 mb-2"># Switch B Configuration - Transit Node</div>
                            <div><span class="cmd">create vlan</span> "Loopback"</div>
                            <div><span class="cmd">configure vlan</span> "Loopback" <span class="cmd">ipaddress</span> 2.2.2.2/32</div>
                            <div><span class="cmd">enable loopback-mode vlan</span> "Loopback"</div>
                            <br>
                            <div><span class="comment"># 接 Switch A 的介面</span></div>
                            <div><span class="cmd">configure vlan</span> "To-A-Link1" <span class="cmd">ipaddress</span> 10.1.1.2/30</div>
                            <div><span class="cmd">configure vlan</span> "To-A-Link2" <span class="cmd">ipaddress</span> 10.1.2.2/30</div>
                            <br>
                            <div><span class="comment"># 接 Switch C 的介面</span></div>
                            <div><span class="cmd">configure vlan</span> "To-C-Link1" <span class="cmd">ipaddress</span> 10.2.1.1/30</div>
                            <div><span class="cmd">configure vlan</span> "To-C-Link2" <span class="cmd">ipaddress</span> 10.2.2.1/30</div>
                            <br>
                            <div><span class="cmd">enable iproute sharing</span></div>
                            <br>
                            <div><span class="comment"># 往 C Loopback 的 ECMP</span></div>
                            <div><span class="cmd">configure iproute add</span> 3.3.3.3/32 10.2.1.2</div>
                            <div><span class="cmd">configure iproute add</span> 3.3.3.3/32 10.2.2.2</div>
                            <br>
                            <div><span class="comment"># 往 A Loopback 的 ECMP (回程路由)</span></div>
                            <div><span class="cmd">configure iproute add</span> 1.1.1.1/32 10.1.1.1</div>
                            <div><span class="cmd">configure iproute add</span> 1.1.1.1/32 10.1.2.1</div>
                        </div>
                    </div>

                    <!-- Switch C Config -->
                    <div id="configC" class="tab-content p-4 bg-gray-900 hidden">
                        <div class="terminal">
                            <div class="text-gray-400 mb-2"># Switch C Configuration - Destination</div>
                            <div><span class="cmd">create vlan</span> "Loopback"</div>
                            <div><span class="cmd">configure vlan</span> "Loopback" <span class="cmd">ipaddress</span> 3.3.3.3/32</div>
                            <div><span class="cmd">enable loopback-mode vlan</span> "Loopback"</div>
                            <br>
                            <div><span class="comment"># 接 Switch B 的介面 IP 設定 (略)...</span></div>
                            <br>
                            <div><span class="cmd">enable iproute sharing</span></div>
                            <br>
                            <div><span class="comment"># 往 A Loopback 的回程路由 ECMP</span></div>
                            <div><span class="cmd">configure iproute add</span> 1.1.1.1/32 10.2.1.1</div>
                            <div><span class="cmd">configure iproute add</span> 1.1.1.1/32 10.2.2.1</div>
                        </div>
                    </div>
                </div>

                <div class="mt-4 bg-black p-4 rounded text-green-400 font-mono text-sm">
                    <p class="text-white mb-2 font-bold border-b border-gray-700 pb-2">驗證方法一：檢查 Routing Table</p>
                    <p>Switch-A # <span class="text-yellow-400">show iproute 3.3.3.3</span></p>
                    <p class="output mt-1 mb-4">
                        Dest              Gateway         Mtr  Flags  VLAN      Duration<br>
                        3.3.3.3/32        10.1.1.2        1    UG-D--- To-B-Link1 0d:0h:2m:10s<br>
                        3.3.3.3/32        10.1.2.2        1    UG-D--- To-B-Link2 0d:0h:2m:10s
                    </p>

                    <p class="text-white mb-2 font-bold border-b border-gray-700 pb-2">驗證方法二：使用 Trace Route (路徑追蹤)</p>
                    <p>Switch-A # <span class="text-yellow-400">traceroute 3.3.3.3</span></p>
                    <p class="output mt-1">
                        traceroute to 3.3.3.3 (3.3.3.3), 30 hops max, 60 byte packets<br>
                        1  10.1.1.2 (To-B-Link1)  1.123 ms  10.1.2.2 (To-B-Link2)  1.054 ms  10.1.1.2 (To-B-Link1)  1.110 ms<br>
                        2  3.3.3.3 (Loopback)     2.150 ms  2.120 ms  2.135 ms
                    </p>
                    <p class="text-gray-400 mt-2 text-xs">
                        <i class="fa-solid fa-circle-info mr-1"></i> 
                        <strong>大師解讀：</strong> 注意看第 1 跳 (Hop 1)，traceroute 發送的三個探測包 (Probes) 出現了不同的 IP (10.1.1.2 與 10.1.2.2)。
                        這是因為 Traceroute 每個 Probe 使用不同的 UDP Port，導致 Hash 運算結果不同，成功驗證了流量正在兩條路徑上進行負載平衡！
                    </p>
                </div>
            </div>
        </section>

        <!-- 5. Quiz -->
        <section class="card" id="quiz">
            <div class="card-header">
                <i class="fa-solid fa-clipboard-question mr-3"></i> 五、隨堂測驗 (Quiz)
            </div>
            <div class="card-body">
                
                <!-- Q1 -->
                <div class="mb-6">
                    <p class="font-bold text-gray-800 mb-2">1. 在 ExtremeXOS 中，若要啟用 ECMP 功能，必須輸入哪條指令？</p>
                    <div class="quiz-option" onclick="checkAnswer(this, false, '這是 OSPF 的指令，不是全域 ECMP。')">enable ospf multipath</div>
                    <div class="quiz-option" data-correct="true" onclick="checkAnswer(this, true, '正確！這是 EXOS 開啟路由負載平衡的關鍵指令。')">enable iproute sharing</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, '這是設定 VLAN 為 Loopback 模式的指令。')">enable loopback-mode</div>
                    <div class="explanation"></div>
                </div>

                <!-- Q2 -->
                <div class="mb-6">
                    <p class="font-bold text-gray-800 mb-2">2. 為什麼建議使用 Loopback IP 作為設備的管理 IP？</p>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 'Loopback IP 速度並不會比實體介面快。')">因為它的傳輸速度最快</div>
                    <div class="quiz-option" data-correct="true" onclick="checkAnswer(this, true, '正確！Loopback 介面只要設備開機就恆為 UP，不受單一實體線路斷線影響。')">因為它不會隨實體介面 Down 而失效 (恆定性)</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 'DHCP 可以在任何 VLAN 上運作。')">因為只有 Loopback 支援 DHCP</div>
                    <div class="explanation"></div>
                </div>

                <!-- Q3 -->
                <div class="mb-6">
                    <p class="font-bold text-gray-800 mb-2">3. 關於 Static Route 達成 ECMP 的條件，下列何者正確？</p>
                    <div class="quiz-option" onclick="checkAnswer(this, false, '如果 Cost 不同，會變成主備援 (Active/Standby) 而非負載平衡。')">不同路徑的 Cost/Metric 必須不同</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, '目的地必須完全相同 (包含 Subnet Mask)。')">目的地 IP 相同但 Subnet Mask 不同</div>
                    <div class="quiz-option" data-correct="true" onclick="checkAnswer(this, true, '正確！目的地相同且成本 (Metric) 相同，Router 才會視為等價路徑。')">目的地相同且 Cost/Metric 相同</div>
                    <div class="explanation"></div>
                </div>

                <!-- Q4 -->
                <div class="mb-6">
                    <p class="font-bold text-gray-800 mb-2">4. 預設情況下，交換器如何決定 ECMP 的封包要走哪條路？</p>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 'Round Robin 通常用於伺服器負載平衡，網路設備轉發通常用 Hash 以確保順序。')">依序輪流 (Round Robin)</div>
                    <div class="quiz-option" data-correct="true" onclick="checkAnswer(this, true, '正確！透過來源/目的 IP 與 Port 進行雜湊運算，確保同一條 Session 走同一條路。')">基於封包表頭資訊的 Hash 演算法</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, '這是 LACP 的機制，不適用於 L3 Routing ECMP。')">依據線路頻寬大小</div>
                    <div class="explanation"></div>
                </div>

                <!-- Q5 -->
                <div class="mb-6">
                    <p class="font-bold text-gray-800 mb-2">5. 在 EXOS 中，要設定一個 VLAN 為 Loopback 介面，除了給 IP 之外還需要什麼？</p>
                    <div class="quiz-option" onclick="checkAnswer(this, false, 'Loopback 不需要加入實體 Port。')">configure vlan add ports 1</div>
                    <div class="quiz-option" data-correct="true" onclick="checkAnswer(this, true, '正確！這是 EXOS 特有的指令，告訴系統這個 VLAN 是虛擬的 Loopback。')">enable loopback-mode vlan [name]</div>
                    <div class="quiz-option" onclick="checkAnswer(this, false, '這是路由指令，與介面屬性無關。')">enable ipforwarding</div>
                    <div class="explanation"></div>
                </div>

            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer>
        <p>Planning & Design by Timmy(timmyc@hauman.com.tw) | 豪勉科技 Hauman Technologies Corporation | Ver 1.0</p>
    </footer>

    <script>
        // Mermaid Init
        mermaid.initialize({ startOnLoad: true, theme: 'default' });

        // Tab Functionality
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByTagName("button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("bg-white", "text-extremePurple", "border-b-2", "border-extremePurple");
                tablinks[i].classList.add("text-gray-600");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.classList.remove("text-gray-600");
            evt.currentTarget.classList.add("bg-white", "text-extremePurple", "border-b-2", "border-extremePurple");
        }

        // Quiz Logic
        function checkAnswer(element, isCorrect, explanationText) {
            let parent = element.parentElement;
            let options = parent.getElementsByClassName('quiz-option');
            let explanationDiv = parent.getElementsByClassName('explanation')[0];
            
            // Disable all options and find the correct one
            let correctOption = null;
            for(let opt of options) {
                opt.style.pointerEvents = 'none'; // Disable further clicks
                if (opt.getAttribute('data-correct') === 'true') {
                    correctOption = opt;
                }
            }

            // Set state for clicked element
            if(isCorrect) {
                element.classList.add('correct');
                explanationDiv.innerHTML = `<strong class="text-green-700">回答正確！</strong> ${explanationText}`;
            } else {
                element.classList.add('wrong');
                // Highlight the correct answer if user got it wrong
                if(correctOption) {
                    correctOption.classList.add('correct');
                }
                explanationDiv.innerHTML = `<strong class="text-red-700">回答錯誤。</strong> ${explanationText}`;
            }
            
            explanationDiv.style.display = 'block';
        }
    </script>
</body>
</html>