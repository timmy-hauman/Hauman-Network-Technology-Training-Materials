<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extreme XOS ç¶²è·¯æ¶æ§‹å¤§å¸«ï¼šMSTP æ·±åº¦æ•™å­¸</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Mermaid JS for diagrams -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .section-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 5px solid #6b21a8; /* Extreme Purple vibe */
        }
        .danger-card {
            border-left: 5px solid #ef4444; /* Red for Danger/Warning */
        }
        .tech-term {
            color: #6b21a8;
            font-weight: 700;
        }
        .mermaid {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .quiz-option {
            transition: all 0.2s;
        }
        .quiz-option:hover {
            background-color: #f3f4f6;
        }
        .correct-answer {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
            color: #065f46 !important;
        }
        .wrong-answer {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
            color: #991b1b !important;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-slate-900 text-white py-8 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-2">Spanning Tree - MSTP (802.1s) æ·±åº¦æ•™å­¸</h1>
            <p class="text-slate-400">Extreme XOS ç¶²è·¯æ¶æ§‹å¤§å¸«ç³»åˆ— | 20 å¹´å¯¦æˆ°ç¶“é©—åˆ†äº«</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex-grow max-w-5xl">

        <!-- 1. æ ¸å¿ƒæ¦‚å¿µ (Concept) -->
        <section class="section-card">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <span class="bg-purple-700 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">1</span>
                æ ¸å¿ƒæ¦‚å¿µ (Concept)
            </h2>
            
            <div class="space-y-4">
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-100">
                    <h3 class="font-bold text-lg mb-2 text-purple-800">ä¸€å¥è©±å®šç¾©</h3>
                    <p class="text-gray-700">
                        MSTP (Multiple Spanning Tree Protocol) æ˜¯ä¸€ç¨®å°‡å¤šå€‹ VLAN æ˜ å°„åˆ°ç‰¹å®šã€Œå¯¦ä¾‹ (Instance)ã€çš„æŠ€è¡“ï¼Œæ—¨åœ¨è§£æ±ºå‚³çµ± STP é‹ç®—éæ…¢èˆ‡ PVST é‹ç®—éæ–¼è€—è²»è³‡æºçš„å•é¡Œï¼Œå¯¦ç¾ç¶²è·¯è² è¼‰å¹³è¡¡ã€‚
                    </p>
                </div>

                <div class="mt-6">
                    <h3 class="font-bold text-lg mb-2 text-gray-800">ç”Ÿæ´»åŒ–æ¯”å–»ï¼šå…¬è»Šå°ˆç”¨é“ç³»çµ±</h3>
                    <p class="leading-relaxed text-gray-600">
                        æƒ³åƒé€™æ˜¯ä¸€åº§åŸå¸‚çš„äº¤é€šç³»çµ±ï¼ŒVLAN å°±æ˜¯ä¸åŒçš„ã€Œä¹˜å®¢ç¾¤é«”ã€ï¼ˆå¦‚ï¼šä¸Šç­æ—ã€å­¸ç”Ÿã€è§€å…‰å®¢ï¼‰ã€‚
                    </p>
                    <ul class="list-disc list-inside mt-3 space-y-2 ml-4 text-gray-600">
                        <li><strong>CST (å‚³çµ± STP)ï¼š</strong> æ‰€æœ‰ä¹˜å®¢ï¼ˆæ‰€æœ‰ VLANï¼‰åªèƒ½æ“ åŒä¸€è¼›å…¬è»Šèµ°åŒä¸€æ¢è·¯ã€‚å¦‚æœé€™æ¢è·¯å°é–‰ï¼Œæ‰€æœ‰äººéƒ½å¡ä½ã€‚ä¸”å³ä¾¿æœ‰å¦ä¸€æ¢ç©ºçš„è·¯ï¼Œä¹Ÿä¸èƒ½ç”¨ï¼ˆå› ç‚ºæ€•è¿´åœˆï¼‰ã€‚</li>
                        <li><strong>PVST+ (Cisco æ—©æœŸ)ï¼š</strong> æ¯å€‹ä¹˜å®¢ç¾¤é«”ï¼ˆæ¯å€‹ VLANï¼‰éƒ½æ´¾ä¸€è¼›å°ˆå±¬å…¬è»Šã€‚é›–ç„¶éˆæ´»ï¼Œä½†è·¯ä¸Šè»Šå­å¤ªå¤šï¼ˆCPU è² è¼‰éé«˜ï¼‰ï¼Œäº¤é€šæŒ‡æ®å®˜ï¼ˆSwitch CPUï¼‰æœƒå´©æ½°ã€‚</li>
                        <li><strong>MSTP (802.1s)ï¼š</strong> é€™æ˜¯æœ€è°æ˜çš„ã€Œå…±ä¹˜åˆ¶åº¦ã€ã€‚æˆ‘å€‘è¦å®šï¼šã€Œå»åŒ—é‚Šçš„ä¹˜å®¢ï¼ˆVLAN 10, 20ï¼‰æ­ A è™Ÿå…¬è»Šï¼Œå»å—é‚Šçš„ä¹˜å®¢ï¼ˆVLAN 30, 40ï¼‰æ­ B è™Ÿå…¬è»Šã€ã€‚é€™æ¨£æ—¢ä¸ç”¨å¤ªå¤šè»Šï¼Œä¹Ÿèƒ½å……åˆ†åˆ©ç”¨æ‰€æœ‰é“è·¯ï¼ˆè² è¼‰å¹³è¡¡ï¼‰ã€‚</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 2. é‹ä½œåŸç† (Mechanism) -->
        <section class="section-card">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <span class="bg-purple-700 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">2</span>
                é‹ä½œåŸç† (Mechanism)
            </h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-bold text-lg mb-3 text-gray-800 border-b pb-2">æŠ€è¡“ç´°ç¯€</h3>
                    <ul class="space-y-3 text-gray-700 text-sm">
                        <li class="flex items-start">
                            <span class="text-purple-600 mr-2">â¤</span>
                            <span><strong>MST Region (å€åŸŸ)ï¼š</strong> é€™æ˜¯ MSTP çš„åŸºæœ¬å–®ä½ã€‚è¦æˆç‚ºåŒä¸€å€‹ Regionï¼Œä¸‰è¦ç´ å¿…é ˆå®Œå…¨ä¸€è‡´ï¼š
                                <br><code class="bg-gray-100 px-1 rounded text-red-500">Region Name</code> (å€åŸŸåç¨±)
                                <br><code class="bg-gray-100 px-1 rounded text-red-500">Revision Number</code> (ä¿®è¨‚ç‰ˆè™Ÿ)
                                <br><code class="bg-gray-100 px-1 rounded text-red-500">VLAN-to-Instance Mapping</code> (æ˜ å°„è¡¨)
                            </span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-purple-600 mr-2">â¤</span>
                            <span><strong>IST (Internal Spanning Tree)ï¼š</strong> å³ Instance 0ã€‚é€™æ˜¯é è¨­çš„å¯¦ä¾‹ï¼Œè² è²¬æ”œå¸¶æ‰€æœ‰æœªæ˜ç¢ºåˆ†çµ„çš„ VLAN ä»¥åŠæ§åˆ¶å°åŒ… (BPDU)ã€‚åœ¨ Extreme XOS ä¸­ï¼Œé€™é€šå¸¸å°æ‡‰åˆ° Default VLAN æˆ– Mgmtã€‚</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-purple-600 mr-2">â¤</span>
                            <span><strong>MSTI (MST Instance)ï¼š</strong> ç”¨æˆ¶è‡ªå®šç¾©çš„å¯¦ä¾‹ï¼ˆå¦‚ Instance 1, Instance 2ï¼‰ã€‚æ¯å€‹ MSTI éƒ½æœ‰ç¨ç«‹çš„ Root Bridge è¨ˆç®—èˆ‡ Blocking Portï¼Œé€™å°±æ˜¯å¯¦ç¾è² è¼‰å¹³è¡¡çš„é—œéµã€‚</span>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg mb-3 text-gray-800 border-b pb-2">Extreme XOS é—œéµåƒæ•¸ & è¨­å®š</h3>
                    <div class="bg-gray-800 text-gray-200 p-4 rounded-lg font-mono text-xs overflow-x-auto shadow-inner">
                        <p class="text-green-400"># è¨­å®š MSTP Region ç¯„ä¾‹</p>
                        <p>configure mstp region name "Hauman_HQ"</p>
                        <p>configure mstp revision 1</p>
                        <br>
                        <p class="text-green-400"># å»ºç«‹ Instance (MSTI)</p>
                        <p>create stpd s1</p>
                        <p>configure stpd s1 mode mstp cist</p>
                        <br>
                        <p class="text-green-400"># æ˜ å°„ VLAN åˆ° Instance</p>
                        <p>configure stpd s1 add vlan "Finance"</p>
                        <p>configure stpd s1 add vlan "HR"</p>
                        <br>
                        <p class="text-green-400"># å•Ÿç”¨</p>
                        <p>enable mstp</p>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">* è¨»ï¼šCIST (Common and Internal Spanning Tree) è² è²¬é€£çµä¸åŒçš„ Regions ä»¥åŠ Region å…§éƒ¨çš„ ISTã€‚</p>
                </div>
            </div>
        </section>

        <!-- 3. æ¶æ§‹è¦–è¦ºåŒ– (Visuals) -->
        <section class="section-card">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <span class="bg-purple-700 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">3</span>
                æ¶æ§‹è¦–è¦ºåŒ– (Visuals)
            </h2>
            <p class="mb-4 text-gray-600">ä»¥ä¸‹é€éä¸‰å€‹åœ–è¡¨å±¤æ¬¡ï¼Œå±•ç¤º MSTP å¦‚ä½•åœ¨åŒä¸€å€‹ç‰©ç†ç·šè·¯ä¸Šï¼Œå»ºç«‹å…©å€‹é‚è¼¯ä¸Šä¸åŒçš„è½‰é€è·¯å¾‘ï¼ˆè² è¼‰å¹³è¡¡ï¼‰ã€‚</p>

            <!-- Diagram 1: Physical Topology -->
            <div class="mb-8 border border-gray-200 rounded p-4">
                <h4 class="font-bold text-center text-gray-700 mb-2">åœ–ä¸€ï¼šç‰©ç†é€£æ¥æ‹“æ’² (Physical Topology)</h4>
                <div class="mermaid">
                    graph TD
                    %% ç‰©ç†å±¤é€£æ¥
                    CoreA[("Core Switch A<br>(Root for MSTI 1)")] 
                    CoreB[("Core Switch B<br>(Root for MSTI 2)")]
                    Access1["Access Switch"]
                    
                    %% é€£æ¥ç·š
                    CoreA ---|Link 1| CoreB
                    CoreA ---|Link 2| Access1
                    CoreB ---|Link 3| Access1
                    
                    style CoreA fill:#e0e7ff,stroke:#4338ca,stroke-width:2px
                    style CoreB fill:#e0e7ff,stroke:#4338ca,stroke-width:2px
                    style Access1 fill:#f3e8ff,stroke:#7e22ce,stroke-width:2px
                </div>
                <p class="text-center text-sm text-gray-500 mt-2">å¯¦é«”ç·šè·¯å…¨éƒ¨æ¥é€šï¼Œè‹¥ç„¡ STP æœƒç”¢ç”Ÿè¿´åœˆã€‚</p>
            </div>

            <!-- Diagram 2: MSTI 1 Logic -->
            <div class="mb-8 border border-gray-200 rounded p-4">
                <h4 class="font-bold text-center text-purple-700 mb-2">åœ–äºŒï¼šMSTI 1 é‚è¼¯è·¯å¾‘ (VLAN 10, 20)</h4>
                <div class="mermaid">
                    graph TD
                    %% MSTI 1 è¦–è§’
                    subgraph MSTI_1 [Instance 1: VLAN 10, 20]
                        Root1[("Core A<br>(ROOT BRIDGE)")] 
                        NonRoot1[("Core B")]
                        Acc1["Access Switch"]
                        
                        Root1 == "Forwarding" ==> NonRoot1
                        Root1 == "Forwarding" ==> Acc1
                        NonRoot1 -. "BLOCKING (x)" .- Acc1
                    end

                    style Root1 fill:#dcfce7,stroke:#16a34a,stroke-width:3px
                    style NonRoot1 fill:#fee2e2,stroke:#dc2626,stroke-width:1px
                    
                    linkStyle 0 stroke:#16a34a,stroke-width:2px;
                    linkStyle 1 stroke:#16a34a,stroke-width:2px;
                    linkStyle 2 stroke:#dc2626,stroke-width:2px,stroke-dasharray: 5 5;
                </div>
                <p class="text-center text-sm text-gray-500 mt-2">åœ¨ Instance 1 ä¸­ï¼Œæµé‡ä¸»è¦èµ°å·¦å´ (Core A)ã€‚å³å´ Link 3 è¢«é˜»æ–·ã€‚</p>
            </div>

            <!-- Diagram 3: MSTI 2 Logic -->
            <div class="border border-gray-200 rounded p-4">
                <h4 class="font-bold text-center text-blue-700 mb-2">åœ–ä¸‰ï¼šMSTI 2 é‚è¼¯è·¯å¾‘ (VLAN 30, 40)</h4>
                <div class="mermaid">
                    graph TD
                    %% MSTI 2 è¦–è§’
                    subgraph MSTI_2 [Instance 2: VLAN 30, 40]
                        NonRoot2[("Core A")] 
                        Root2[("Core B<br>(ROOT BRIDGE)")]
                        Acc2["Access Switch"]
                        
                        NonRoot2 == "Forwarding" ==> Root2
                        NonRoot2 -. "BLOCKING (x)" .- Acc2
                        Root2 == "Forwarding" ==> Acc2
                    end

                    style Root2 fill:#dcfce7,stroke:#16a34a,stroke-width:3px
                    style NonRoot2 fill:#fee2e2,stroke:#dc2626,stroke-width:1px
                    
                    linkStyle 0 stroke:#16a34a,stroke-width:2px;
                    linkStyle 1 stroke:#dc2626,stroke-width:2px,stroke-dasharray: 5 5;
                    linkStyle 2 stroke:#16a34a,stroke-width:2px;
                </div>
                <p class="text-center text-sm text-gray-500 mt-2">åœ¨ Instance 2 ä¸­ï¼Œæµé‡ä¸»è¦èµ°å³å´ (Core B)ã€‚å·¦å´ Link 2 è¢«é˜»æ–·ã€‚</p>
            </div>
        </section>

        <!-- 4. å¯¦å‹™æ‡‰ç”¨å ´æ™¯ (Use Case) -->
        <section class="section-card">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <span class="bg-purple-700 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">4</span>
                å¯¦å‹™æ‡‰ç”¨å ´æ™¯ (Use Case)
            </h2>

            <div class="mb-4">
                <h3 class="font-bold text-lg text-gray-800">æ¡ˆä¾‹ï¼šå¤§å‹ä¼æ¥­åœ’å€æ ¸å¿ƒå±¤ (Campus Core)</h3>
                <p class="text-gray-600 mt-2">
                    æŸç§‘æŠ€å…¬å¸æœ‰å…©å°æ ¸å¿ƒäº¤æ›å™¨ (Core-A, Core-B) é€é MLAG æˆ–å¯¦é«”ç·šè·¯äº’é€£ï¼Œä¸¦ä¸‹æ¥æ•¸åå° Access Switchã€‚å…¬å¸ä¸»è¦æœ‰å…©å€‹é¾å¤§çš„æ¥­å‹™éƒ¨é–€ï¼š
                    <br>1. <strong>ç ”ç™¼éƒ¨ (RD)</strong>ï¼šä½¿ç”¨ VLAN 100-199ï¼Œè³‡æ–™é‡æ¥µå¤§ã€‚
                    <br>2. <strong>è¡Œæ”¿éƒ¨ (Admin)</strong>ï¼šä½¿ç”¨ VLAN 200-299ï¼Œä¸»è¦æ˜¯ ERP æµé‡ã€‚
                </p>
            </div>

            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                <h4 class="font-bold text-blue-800">éƒ¨ç½²ç­–ç•¥</h4>
                <ul class="list-disc ml-4 text-blue-700 text-sm mt-1">
                    <li>è¨­å®š <strong>Core-A</strong> ç‚º MSTI 1 (VLAN 100-199) çš„ Root Bridge (Priority 4096)ï¼ŒCore-B ç‚º Secondaryã€‚</li>
                    <li>è¨­å®š <strong>Core-B</strong> ç‚º MSTI 2 (VLAN 200-299) çš„ Root Bridge (Priority 4096)ï¼ŒCore-A ç‚º Secondaryã€‚</li>
                    <li>Access Switch è¨­å®šç›¸åŒ Regionï¼Œä¸¦æ ¹æ“š Instance è‡ªå‹•è¨ˆç®—æœ€çŸ­è·¯å¾‘ã€‚</li>
                </ul>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                <div class="bg-green-50 p-3 rounded">
                    <h4 class="font-bold text-green-700 flex items-center">ğŸ‘ å„ªé» (Pros)</h4>
                    <ul class="text-sm text-green-800 ml-4 list-disc mt-1">
                        <li><strong>é »å¯¬åˆ©ç”¨æœ€å¤§åŒ–ï¼š</strong> ä¸Šè¡Œéˆè·¯ä¸å†æœ‰ä¸€æ¢é–’ç½® (Blocked)ï¼Œå…©æ¢ç·šè·¯åˆ†åˆ¥æœå‹™ä¸åŒéƒ¨é–€ã€‚</li>
                        <li><strong>è³‡æºç¯€çœï¼š</strong> ç›¸æ¯” PVST ç‚ºæ¯å€‹ VLAN è·‘ä¸€å€‹é‹ç®—ç¨‹åºï¼ŒMSTP åªéœ€è¦è·‘ 2 å€‹ Instanceï¼ŒCPU è² æ“”å¤§å¹…é™ä½ã€‚</li>
                        <li><strong>ç›¸å®¹æ€§ï¼š</strong> 802.1s æ˜¯åœ‹éš›æ¨™æº–ï¼ŒExtreme å¯ä»¥è·Ÿ Ciscoã€Juniper å®Œç¾ä»‹æ¥ã€‚</li>
                    </ul>
                </div>
                <div class="bg-red-50 p-3 rounded">
                    <h4 class="font-bold text-red-700 flex items-center">âš ï¸ ç¼ºé» (Cons)</h4>
                    <ul class="text-sm text-red-800 ml-4 list-disc mt-1">
                        <li><strong>è¨­å®šè¤‡é›œï¼š</strong> Region è¨­å®š (Name/Rev/Map) å¿…é ˆåœ¨æ‰€æœ‰äº¤æ›å™¨ä¸Šã€Œå®Œå…¨ä¸€è‡´ã€ï¼ŒéŒ¯ä¸€å€‹å­—å°±æœƒè®Šæˆä¸åŒ Regionï¼Œå°è‡´é€€åŒ–æˆå‚³çµ± STP è¡Œç‚ºã€‚</li>
                        <li><strong>é™¤éŒ¯é›£åº¦ï¼š</strong> éœ€è¦åŒæ™‚æª¢æŸ¥ä¸åŒ Instance çš„æ‹“æ’²ï¼Œåˆå­¸è€…å®¹æ˜“æ··æ·†ã€‚</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 5. é€²éšé™·é˜± (Advanced Pitfalls) - New Section -->
        <section class="section-card danger-card">
            <h2 class="text-2xl font-bold mb-4 flex items-center text-red-700">
                <span class="bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">5</span>
                é€²éšé™·é˜±ï¼šVLAN æ‹“æ’²ä¸ä¸€è‡´çš„é»‘æ´
            </h2>
            <p class="mb-4 text-gray-700 font-bold">ç•¶æ‰€æœ‰ VLAN éƒ½åœ¨åŒä¸€å€‹ Instanceï¼Œä½†æ¯å€‹ VLAN çš„å¯¦é«”é€£æ¥æ‹“æ’²ä¸åŒæ™‚ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ</p>

            <!-- 5.1 Concept -->
            <div class="mb-6">
                <h3 class="font-bold text-lg mb-2 text-gray-800 border-b border-red-200 pb-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µï¼šåŒå‘½ä¸åŒé‹</h3>
                <p class="text-gray-700">
                    <strong class="text-red-600">å®šç¾©ï¼š</strong> ç•¶å¤šå€‹ VLAN ç¶å®šåœ¨åŒä¸€å€‹ MSTI (Instance)ï¼Œä½†é€™äº› VLAN åœ¨å¯¦é«”éˆè·¯ä¸Šçš„å…è¨±æ¸…å–® (Tagged List) ä¸ä¸€è‡´æ™‚ï¼ŒMSTP è¨ˆç®—å‡ºçš„ã€Œé˜»æ–·é» (Blocking Port)ã€å¯èƒ½æœƒæ°å¥½é˜»æ–·æŸå€‹ VLAN çš„ã€Œå”¯ä¸€è·¯å¾‘ã€ï¼Œå°è‡´è©² VLAN æµé‡å®Œå…¨ä¸­æ–· (Blackholed)ã€‚
                </p>
                <div class="mt-3 bg-red-50 p-3 rounded text-sm text-gray-700 italic">
                    <strong>ç”Ÿæ´»åŒ–æ¯”å–»ï¼š</strong> 
                    æƒ³åƒ VLAN 10 (ç´…ç·š) å’Œ VLAN 20 (è—ç·š) è¢«æ†æˆä¸€æŸ (Instance 1) æ­ä¹˜ç«è»Šã€‚ç«è»Šé§•é§› (MSTP) å› ç‚ºå‰æ–¹éµè»Œç¶­ä¿®ï¼Œæ±ºå®šå°é–‰å³é‚Šè»Œé“ï¼Œå…¨è»Šæ”¹èµ°å·¦é‚Šã€‚
                    <br>ä½†ä¸å¹¸çš„æ˜¯ï¼Œ<strong>ç´…ç·šä¹˜å®¢çš„ç¥¨ (Tag) åªèƒ½èµ°å³é‚Š</strong>ã€‚çµæœå°±æ˜¯ï¼šè»Šå­èµ°äº†å·¦é‚Šï¼Œä½†ç´…ç·šä¹˜å®¢å› ç‚ºæ²’ç¥¨ä¸Šä¸äº†è»Šï¼›å³é‚Šè»Œé“é›–ç„¶æœ‰ç¥¨ä½†è¢«å°é–‰äº†ã€‚ç´…ç·šä¹˜å®¢å› æ­¤å“ªè£¡éƒ½å»ä¸äº†ã€‚
                </div>
            </div>

            <!-- 5.2 Mechanism -->
            <div class="mb-6">
                <h3 class="font-bold text-lg mb-2 text-gray-800 border-b border-red-200 pb-1">äºŒã€é‹ä½œåŸç†ï¼šSTP ç‹€æ…‹èˆ‡ VLAN Tag çš„è„«é‰¤</h3>
                <ul class="list-disc list-inside space-y-2 text-gray-700 text-sm">
                    <li><strong>MSTP åªçœ‹ Instanceï¼š</strong> äº¤æ›å™¨åœ¨è¨ˆç®—è·¯å¾‘æ™‚ï¼Œåªæ ¹æ“š Instance çš„åƒæ•¸ (Cost, Priority) æ±ºå®šå“ªå€‹ Port è¦ Blockã€‚å®ƒ<strong>ä¸æœƒ</strong>å»æª¢æŸ¥è£¡é¢çš„ VLAN 10 æ˜¯å¦åœ¨é‚£å€‹ Port ä¸Šæœ‰æ‰“ Tagã€‚</li>
                    <li><strong>State å„ªå…ˆæ–¼ VLANï¼š</strong> å¦‚æœ Port 2 è¢« MSTP è¨­ç‚º <code class="bg-red-100 text-red-600 px-1">Blocking</code>ï¼Œé‚£éº¼å±¬æ–¼è©² Instance çš„<strong>æ‰€æœ‰</strong> VLAN å°åŒ…éƒ½æœƒè¢«ä¸Ÿæ£„ã€‚</li>
                    <li><strong>æ²’æœ‰è‡ªå‹•è£œæ•‘ï¼š</strong> å³ä½¿ VLAN 20 åœ¨ Port 1 (Forwarding ç‹€æ…‹) æ²’æœ‰è¢«å…è¨± (æœª Tagged)ï¼ŒMSTP ä¹Ÿä¸æœƒå› æ­¤æŠŠ Port 2 æ‰“é–‹ã€‚Loop-Free æ˜¯æœ€é«˜åŸå‰‡ã€‚</li>
                </ul>
            </div>

            <!-- 5.3 Visuals -->
            <div class="mb-6">
                <h3 class="font-bold text-lg mb-2 text-gray-800 border-b border-red-200 pb-1">ä¸‰ã€é™·é˜±è¦–è¦ºåŒ–æµç¨‹</h3>
                
                <!-- Step 1: Physical Config Mismatch -->
                <div class="mb-4 border border-gray-200 rounded p-3">
                    <h4 class="font-bold text-center text-gray-600 text-sm mb-1">åœ–Aï¼šç‰©ç†é…ç½®èˆ‡ VLAN éŒ¯ç½® (è¨­å®šå¤±èª¤)</h4>
                    <div class="mermaid">
                        graph TD
                        Core[Core Switch]
                        Edge[Edge Switch]
                        
                        Core -- "Link 1<br>(VLAN 10 Only)<br>Cost 10" --- Edge
                        Core -- "Link 2<br>(VLAN 20 Only)<br>Cost 20" --- Edge

                        style Core fill:#e2e8f0
                        style Edge fill:#e2e8f0
                        linkStyle 0 stroke:#3b82f6,stroke-width:2px;
                        linkStyle 1 stroke:#ef4444,stroke-width:2px;
                    </div>
                    <p class="text-center text-xs text-gray-500">æ³¨æ„ï¼šVLAN 10 åªåœ¨å·¦é‚Šï¼ŒVLAN 20 åªåœ¨å³é‚Šã€‚ä½†å…©è€…éƒ½åœ¨ Instance 1ã€‚</p>
                </div>

                <!-- Step 2: MSTP Calculation -->
                <div class="mb-4 border border-gray-200 rounded p-3">
                    <h4 class="font-bold text-center text-purple-700 text-sm mb-1">åœ–Bï¼šMSTP Instance 1 è¨ˆç®—çµæœ</h4>
                    <div class="mermaid">
                        graph TD
                        Core[Core Switch]
                        Edge[Edge Switch]
                        
                        Core == "Link 1<br>FORWARDING<br>(Root Port)" ==> Edge
                        Core -. "Link 2<br>BLOCKING<br>(Alternate)" .- Edge

                        style Core fill:#e2e8f0
                        style Edge fill:#e2e8f0
                        linkStyle 0 stroke:#16a34a,stroke-width:3px;
                        linkStyle 1 stroke:#dc2626,stroke-width:3px,stroke-dasharray: 5 5;
                    </div>
                    <p class="text-center text-xs text-gray-500">MSTP ç™¼ç¾ Link 1 Cost è¼ƒä½ï¼Œé¸ç‚º Forwardingã€‚Link 2 ç‚ºäº†é˜²åœˆè¢« Blockã€‚</p>
                </div>

                <!-- Step 3: Result -->
                <div class="border border-red-200 bg-red-50 rounded p-3">
                    <h4 class="font-bold text-center text-red-700 text-sm mb-1">åœ–Cï¼šæœ€çµ‚æµé‡çµæœ (VLAN 20 æ–·ç·š)</h4>
                    <div class="mermaid">
                        graph TD
                        subgraph Result [Instance 1 Traffic Flow]
                            L1["Link 1 (FWD)"]
                            L2["Link 2 (BLK)"]
                            
                            V10(VLAN 10 Traffic) -->|VLAN Allowed| L1
                            V10 -->|Success| OK[é€šè¨Šæ­£å¸¸]

                            V20(VLAN 20 Traffic) -->|VLAN NOT Allowed| L1
                            V20 -->|Drop| Fail1[æ–·ç·š: Link 1 ç„¡ Tag]

                            V20_2(VLAN 20 Traffic) -->|STP Blocked| L2
                            V20_2 -->|Drop| Fail2[æ–·ç·š: Link 2 è¢« STP é˜»æ“‹]
                        end
                        style Fail1 fill:#fee2e2,stroke:#ef4444
                        style Fail2 fill:#fee2e2,stroke:#ef4444
                        style OK fill:#dcfce7,stroke:#16a34a
                    </div>
                    <p class="text-center text-xs text-red-600 mt-2 font-bold">VLAN 20 å…©é‚Šéƒ½ä¸é€šï¼é€™å°±æ˜¯æ‹“æ’²ä¸ä¸€è‡´é€ æˆçš„é»‘æ´ã€‚</p>
                </div>
            </div>

            <!-- 5.4 Use Case -->
            <div>
                <h3 class="font-bold text-lg mb-2 text-gray-800 border-b border-red-200 pb-1">å››ã€å¯¦å‹™æ‡‰ç”¨èˆ‡æ•™è¨“</h3>
                <p class="text-gray-700 text-sm mb-2">é€™ç¨®æƒ…æ³å¸¸ç™¼ç”Ÿåœ¨<strong>ã€Œé€æ­¥é·ç§»ã€</strong>æˆ–<strong>ã€Œå‚™æ´ç·šè·¯æ¸¬è©¦ã€</strong>å ´æ™¯ï¼š</p>
                <div class="bg-white border rounded p-3 text-sm text-gray-600">
                    <p>å·¥ç¨‹å¸«åœ¨ Core Switch æ–°å¢äº†ä¸€å€‹æ¸¬è©¦ç”¨çš„ VLAN 999 (å±¬æ–¼ Instance 1)ï¼Œç‚ºäº†æ¸¬è©¦å‚™æ´ç·šè·¯ï¼Œä»–åˆ»æ„åªåœ¨ Backup Link (Link 2) ä¸Šæ”¾è¡Œ VLAN 999ã€‚<br>
                    <strong>çµæœï¼š</strong> å› ç‚º Instance 1 åˆ¤å®š Link 1 æ‰æ˜¯ä¸»è·¯å¾‘ï¼Œå°‡ Link 2 Block æ‰äº†ã€‚VLAN 999 é›–ç„¶åœ¨ Link 2 ä¸Šæœ‰è¨­å®šï¼Œä½†è·¯ä¸é€šï¼›åœ¨ Link 1 ä¸Šè·¯é€šï¼Œä½†æ²’è¨­å®šã€‚å°è‡´æ¸¬è©¦æ°¸é å¤±æ•—ã€‚</p>
                </div>
                <p class="mt-3 text-red-600 font-bold text-sm">âš ï¸ é»ƒé‡‘æº–å‰‡ï¼šåŒä¸€å€‹ MST Instance å…§çš„æ‰€æœ‰ VLANï¼Œå…¶ L2 å¯¦é«”æ‹“æ’² (Member Ports) å¿…é ˆå®Œå…¨ä¸€è‡´ã€‚</p>
            </div>
        </section>

        <!-- 6. ç¶œåˆéš¨å ‚æ¸¬é©— (Quiz) -->
        <section class="section-card">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <span class="bg-purple-700 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm">6</span>
                ç¶œåˆéš¨å ‚æ¸¬é©— (Quiz)
            </h2>
            <p class="mb-6 text-gray-500 text-sm">åŒ…å«åŸºç¤æ¦‚å¿µèˆ‡é€²éšé™·é˜±é¡Œã€‚è«‹é»æ“Šæ‚¨èªç‚ºæ­£ç¢ºçš„é¸é …ã€‚</p>

            <div id="quiz-container" class="space-y-6">
                <!-- Questions will be injected here by JS -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-gray-400 py-4 text-xs">
        <div class="container mx-auto px-4 text-center">
            <p>Planning & Design by Timmy(timmyc@hauman.com.tw) | è±ªå‹‰ç§‘æŠ€ Hauman Technologies Corporation | Ver 1.0</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Initialize Mermaid
        mermaid.initialize({ startOnLoad: true });

        // Quiz Data (Updated with Scenario Questions)
        const quizData = [
            {
                question: "1. MSTP çš„åœ‹éš›æ¨™æº–å”è­°ç·¨è™Ÿç‚ºä½•ï¼Ÿ",
                options: ["IEEE 802.1d", "IEEE 802.1w", "IEEE 802.1s", "IEEE 802.1q"],
                answer: 2,
                explanation: "802.1d æ˜¯å‚³çµ± STPï¼Œ802.1w æ˜¯ RSTPï¼Œ802.1q æ˜¯ VLAN Taggingã€‚MSTP çš„æ¨™æº–æ˜¯ 802.1sã€‚"
            },
            {
                question: "2. è¦è®“å…©å°äº¤æ›å™¨å±¬æ–¼åŒä¸€å€‹ MST Regionï¼Œä¸‹åˆ—å“ªå€‹åƒæ•¸ **ä¸éœ€è¦** å®Œå…¨ä¸€è‡´ï¼Ÿ",
                options: ["Region Name (å€åŸŸåç¨±)", "Revision Number (ä¿®è¨‚ç‰ˆè™Ÿ)", "VLAN-to-Instance Mapping (VLAN æ˜ å°„è¡¨)", "Switch IP Address (äº¤æ›å™¨ IP)"],
                answer: 3,
                explanation: "MST Region çš„ä¸‰è¦ç´ æ˜¯ Name, Revision å’Œ Mapping Digestã€‚IP ä½å€æ¯å°è¨­å‚™éƒ½ä¸åŒï¼Œä¸å½±éŸ¿ Region åˆ¤å®šã€‚"
            },
            {
                question: "3. é—œæ–¼ MSTI (Multiple Spanning Tree Instance) çš„æ•˜è¿°ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ",
                options: ["æ¯å€‹ VLAN éƒ½å¿…é ˆæœ‰ä¸€å€‹ç¨ç«‹çš„ Instance", "æ‰€æœ‰ Instance å…±äº«åŒä¸€å€‹ Root Bridge", "ä¸åŒçš„ Instance å¯ä»¥æœ‰ä¸åŒçš„ Root Bridge èˆ‡é˜»å¡ç«¯å£", "Instance 0 ä¸èƒ½ç”¨ä¾†å‚³è¼¸è³‡æ–™"],
                answer: 2,
                explanation: "MSTP çš„ç²¾é«“å°±åœ¨æ–¼ä¸åŒçš„ Instance (å¦‚ MSTI 1, MSTI 2) å¯ä»¥é¸å®šä¸åŒçš„ Root Bridgeï¼Œå¾è€Œè®“ä¸åŒçš„ VLAN èµ°ä¸åŒçš„ç‰©ç†è·¯å¾‘ï¼Œå¯¦ç¾è² è¼‰å¹³è¡¡ã€‚"
            },
            {
                question: "4. å¦‚æœä¸€å€‹ç¶²è·¯ç’°å¢ƒä¸­æ··åˆäº† MSTP èˆ‡å‚³çµ± RSTP äº¤æ›å™¨ï¼ŒMSTP å€åŸŸå°å¤–æœƒå‘ˆç¾ä»€éº¼æ¨£å­ï¼Ÿ",
                options: ["æœƒå°è‡´ç¶²è·¯ç™±ç˜“", "çœ‹èµ·ä¾†åƒæ˜¯ä¸€å€‹å·¨å¤§çš„å–®ä¸€è™›æ“¬äº¤æ›å™¨ (Virtual Switch)", "æœƒè‡ªå‹•å°‡æ‰€æœ‰ VLAN è½‰ç‚º PVST æ¨¡å¼", "ç„¡æ³•äº’é€š"],
                answer: 1,
                explanation: "MSTP å‘ä¸‹ç›¸å®¹ RSTPã€‚å°æ–¼å€åŸŸå¤–çš„ RSTP äº¤æ›å™¨ä¾†èªªï¼Œæ•´å€‹ MST Region çœ‹èµ·ä¾†å°±åƒæ˜¯ä¸€å°å·¨å¤§çš„äº¤æ›å™¨ (é€é CIST æºé€š)ã€‚"
            },
            {
                question: "5. åœ¨ Extreme XOS ä¸­ï¼Œé è¨­çš„ Instance (IST) é€šå¸¸æ˜¯æŒ‡å“ªä¸€å€‹ï¼Ÿ",
                options: ["s0 (Instance 0)", "s1 (Instance 1)", "Default VLAN", "Mgmt VLAN"],
                answer: 0,
                explanation: "åœ¨ Extreme XOS å»ºç«‹ STPD æ™‚ï¼Œs0 é€šå¸¸è¢«ä¿ç•™ä½œç‚º CIST/IST (Instance 0) ä½¿ç”¨ï¼Œè² è²¬è™•ç†æœªæ˜ å°„çš„ VLAN å’Œ BPDU äº¤æ›ã€‚"
            },
            // New Questions for the Scenario
            {
                question: "6. [é€²éšé¡Œ] è‹¥ VLAN 10 å’Œ VLAN 20 å±¬æ–¼åŒä¸€å€‹ MST Instanceï¼Œä½†åœ¨ç‰©ç†é€£æ¥ä¸Š VLAN 10 åƒ…å­˜åœ¨æ–¼ Link Aï¼ŒVLAN 20 åƒ…å­˜åœ¨æ–¼ Link Bã€‚ç•¶ MSTP æ±ºå®š Block Link B æ™‚ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ",
                options: ["VLAN 20 æœƒè‡ªå‹•æ”¹èµ° Link A", "MSTP æœƒè‡ªå‹•å•Ÿç”¨ Link B çµ¦ VLAN 20 ä½¿ç”¨", "VLAN 20 é€šè¨Šä¸­æ–· (é»‘æ´)", "VLAN 10 å’Œ 20 äº’é€š"],
                answer: 2,
                explanation: "MSTP æ˜¯ä»¥ Instance ç‚ºå–®ä½é˜»æ“‹ Portã€‚å¦‚æœ Link B è¢« Instance Blockï¼Œå‰‡è©² Instance å…§çš„æ‰€æœ‰ VLAN (åŒ…å« VLAN 20) éƒ½ç„¡æ³•é€šé Link Bã€‚è€Œ Link A åˆæ²’æœ‰è¨­å®šå…è¨± VLAN 20ï¼Œå› æ­¤ VLAN 20 ç„¡è·¯å¯èµ°ã€‚"
            },
            {
                question: "7. [é€²éšé¡Œ] ç‚ºä»€éº¼ MSTP ä¸æœƒæª¢æŸ¥å€‹åˆ¥ VLAN çš„ Tag ç‹€æ…‹ä¾†æ±ºå®šæ˜¯å¦é˜»æ“‹ Portï¼Ÿ",
                options: ["ç‚ºäº†ç¯€çœ CPU è³‡æºä¸¦ç¶­æŒ Loop-Free æ¶æ§‹", "å› ç‚º VLAN ID åªæœ‰ 12 bit ä¸å¤ ç”¨", "ç¡¬é«”é™åˆ¶ç„¡æ³•æª¢æŸ¥", "ç‚ºäº†ç›¸å®¹ Cisco è¨­å‚™"],
                answer: 0,
                explanation: "MSTP çš„è¨­è¨ˆåˆè¡·å°±æ˜¯å°‡å¤§é‡ VLAN ç°¡åŒ–ç‚ºå°‘é‡ Instance é€²è¡Œé‹ç®—ï¼Œä»¥ç¯€çœ CPUã€‚è‹¥è¦é€ä¸€æª¢æŸ¥ VLAN ç‹€æ…‹ï¼Œå°±è®Šå› PVST+ äº†ã€‚ä¸”ç‚ºäº†ç¢ºä¿ç„¡è¿´åœˆï¼ŒInstance çš„æ‹“æ’²å¿…é ˆåš´æ ¼åŸ·è¡Œã€‚"
            },
            {
                question: "8. [é€²éšé¡Œ] ç‚ºäº†é¿å…ã€Œæ‹“æ’²ä¸ä¸€è‡´ã€é€ æˆçš„æµé‡é»‘æ´ï¼Œæœ€ä½³å¯¦è¸(Best Practice)æ˜¯ä»€éº¼ï¼Ÿ",
                options: ["ä¸è¦ä½¿ç”¨ MSTPï¼Œå…¨éƒ¨æ”¹ç”¨ RIP", "ç¢ºä¿åŒä¸€ Instance å…§çš„æ‰€æœ‰ VLAN åœ¨æ‰€æœ‰ Trunk Port ä¸Šçš„è¨­å®šå®Œå…¨ä¸€è‡´", "å°‡æ¯å€‹ VLAN éƒ½è¨­å®šç‚ºç¨ç«‹çš„ Instance", "é—œé–‰ Spanning Tree"],
                answer: 1,
                explanation: "è¦é¿å…æ­¤å•é¡Œï¼Œå¿…é ˆç¢ºä¿å±¬æ–¼åŒä¸€ Instance çš„ VLAN æ“æœ‰ç›¸åŒçš„ç‰©ç†æ‹“æ’²ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœ Link 1 å…è¨±äº† VLAN 10ï¼Œä¸” VLAN 10 èˆ‡ 20 åŒçµ„ï¼Œé‚£ Link 1 ä¹Ÿæ‡‰è©²å…è¨± VLAN 20 (æˆ–è‡³å°‘ä¿æŒè¨­å®šå°ç¨±)ã€‚"
            }
        ];

        // Render Quiz
        const quizContainer = document.getElementById('quiz-container');

        quizData.forEach((q, index) => {
            const questionEl = document.createElement('div');
            questionEl.className = 'bg-white border rounded-lg p-4 shadow-sm';
            
            let optionsHtml = '';
            q.options.forEach((opt, optIndex) => {
                optionsHtml += `
                    <button 
                        class="quiz-option w-full text-left p-3 rounded border mb-2 text-sm text-gray-700 hover:border-purple-400 focus:outline-none"
                        onclick="checkAnswer(${index}, ${optIndex}, this)"
                    >
                        ${String.fromCharCode(65 + optIndex)}. ${opt}
                    </button>
                `;
            });

            questionEl.innerHTML = `
                <h3 class="font-bold text-gray-800 mb-3">Q${index + 1}: ${q.question}</h3>
                <div class="space-y-1">${optionsHtml}</div>
                <div id="feedback-${index}" class="hidden mt-3 p-3 rounded text-sm"></div>
            `;
            quizContainer.appendChild(questionEl);
        });

        // Check Answer Function
        window.checkAnswer = function(qIndex, selectedOptIndex, btnElement) {
            const q = quizData[qIndex];
            const feedbackEl = document.getElementById(`feedback-${qIndex}`);
            const allBtns = btnElement.parentElement.querySelectorAll('button');

            // Disable all buttons in this question
            allBtns.forEach(btn => btn.disabled = true);

            if (selectedOptIndex === q.answer) {
                // Correct
                btnElement.classList.add('correct-answer');
                feedbackEl.className = 'mt-3 p-3 rounded text-sm bg-green-100 text-green-800 border border-green-200';
                feedbackEl.innerHTML = `<strong>âœ… æ­£ç¢ºï¼</strong><br>${q.explanation}`;
            } else {
                // Wrong
                btnElement.classList.add('wrong-answer');
                // Highlight correct answer
                allBtns[q.answer].classList.add('correct-answer');
                
                feedbackEl.className = 'mt-3 p-3 rounded text-sm bg-red-100 text-red-800 border border-red-200';
                feedbackEl.innerHTML = `<strong>âŒ ç­”éŒ¯äº†ã€‚</strong><br>æ­£ç¢ºç­”æ¡ˆæ˜¯ (${String.fromCharCode(65 + q.answer)})ã€‚<br>${q.explanation}`;
            }
            feedbackEl.classList.remove('hidden');
        };
    </script>
</body>
</html>