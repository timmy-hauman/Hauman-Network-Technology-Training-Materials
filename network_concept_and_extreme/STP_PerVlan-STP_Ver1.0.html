<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanning Tree 架構解析：Per-VLAN vs CST (802.1d/w)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .mermaid { display: flex; justify-content: center; }
        .quiz-option:hover { background-color: #f3f4f6; cursor: pointer; }
        .quiz-selected { background-color: #dbeafe; border-color: #3b82f6; }
        .reveal-answer { display: none; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-slate-900 text-white p-6 shadow-lg">
        <div class="container mx-auto">
            <h1 class="text-3xl font-bold"><i class="fas fa-network-wired mr-2"></i> Spanning Tree 架構深度解析</h1>
            <p class="mt-2 text-slate-300">ExtremeXOS 網路架構大師觀點：從標準 802.1d/w 到 Per-VLAN 機制</p>
        </div>
    </header>

    <main class="container mx-auto p-6 space-y-12">

        <!-- Section 1: Core Concept -->
        <section id="concept" class="bg-white rounded-lg shadow-md p-8 border-l-4 border-purple-600">
            <h2 class="text-2xl font-bold mb-4 text-purple-700">一、核心概念 (Concept)</h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-bold text-lg mb-2"><i class="fas fa-lightbulb text-yellow-500 mr-2"></i>一句話定義</h3>
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>CST (Common Spanning Tree, 802.1d/w):</strong> 所有的 VLAN 共用「同一張」邏輯拓撲地圖，一條路斷了，所有 VLAN 一起改道。</li>
                        <li><strong>Per-VLAN STP (PVST+ / R-PVST):</strong> 每一個 VLAN 擁有「獨立」的邏輯拓撲地圖，VLAN 10 走左邊，VLAN 20 可以走右邊。</li>
                    </ul>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2"><i class="fas fa-coffee text-brown-600 mr-2"></i>生活化比喻</h3>
                    <p class="mb-4">想像一家大型物流公司的運輸路線：</p>
                    <p class="mb-2"><strong>CST (標準 STP)：</strong>像是一條<strong>「單行管制鐵路」</strong>。無論是載運黃金 (VLAN 10) 還是煤炭 (VLAN 20) 的火車，都必須遵循完全相同的軌道。如果主軌道維修，所有類型的火車都必須一起繞遠路，即便旁邊有空閒的軌道也不能用。</p>
                    <p><strong>Per-VLAN STP：</strong>像是<strong>「多層立體高架道路」</strong>。載客巴士 (VLAN 10) 走上層道路，貨車 (VLAN 20) 走下層道路。上層塞車時，下層可能依然暢通。兩者互不干擾，且能同時利用兩條道路的運量。</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Mechanism -->
        <section id="mechanism" class="bg-white rounded-lg shadow-md p-8 border-l-4 border-blue-600">
            <h2 class="text-2xl font-bold mb-4 text-blue-700">二、運作原理 (Mechanism)</h2>
            
            <div class="overflow-x-auto">
                <table class="min-w-full bg-white border border-gray-200 mb-6">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="py-3 px-4 border-b text-left">特性</th>
                            <th class="py-3 px-4 border-b text-left">CST (802.1d / 802.1w)</th>
                            <th class="py-3 px-4 border-b text-left">Per-VLAN STP (PVST+ / STPD)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="py-3 px-4 border-b font-semibold">STP 實例 (Instance)</td>
                            <td class="py-3 px-4 border-b">1 個 (無論有多少 VLAN)</td>
                            <td class="py-3 px-4 border-b">N 個 (每個 VLAN 1 個，或每個 Domain 1 個)</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 border-b font-semibold">BPDU 行為</td>
                            <td class="py-3 px-4 border-b">通常不帶 Tag，透過 Native VLAN 傳送。</td>
                            <td class="py-3 px-4 border-b">每個 VLAN 發送帶有 Tag 的 BPDU (Cisco 使用專屬 MAC 01:00:0c:cc:cc:cd)。</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 border-b font-semibold">CPU 消耗</td>
                            <td class="py-3 px-4 border-b"><span class="text-green-600 font-bold">低</span> (只需計算一次)</td>
                            <td class="py-3 px-4 border-b"><span class="text-red-600 font-bold">高</span> (100 個 VLAN 就需計算 100 次演算法)</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 border-b font-semibold">負載平衡 (Load Balancing)</td>
                            <td class="py-3 px-4 border-b">無法達成 (所有流量走同一條路)</td>
                            <td class="py-3 px-4 border-b">可以達成 (不同 VLAN 走不同 Uplink)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="space-y-4 text-sm text-gray-700 bg-gray-50 p-4 rounded">
                <h4 class="font-bold text-gray-900">技術細節與廠商觀點：</h4>
                <p><strong>ExtremeXOS 視角：</strong> Extreme 使用 <code>STPD (Spanning Tree Domain)</code> 的概念。預設的 <code>s0</code> 是 CST 模式。若要達成 Per-VLAN 效果，我們可以在 Extreme Switch 上建立多個 STPD (例如 stpd_v10, stpd_v20)，並將不同的 VLAN 加入不同的 STPD，再分別指定不同的 Carrier VLAN。這比 Cisco 自動為每個 VLAN 產生 Instance 更具彈性與控制力。</p>
                <p><strong>Cisco 視角：</strong> Cisco 設備預設即為 PVST+ (或 Rapid-PVST+)。這意味著只要你建立一個 VLAN 10，交換機就會自動在背景啟動一個針對 VLAN 10 的 STP 程序。</p>
            </div>
        </section>

        <!-- Section 3: Visualization -->
        <section id="visuals" class="bg-white rounded-lg shadow-md p-8 border-l-4 border-green-600">
            <h2 class="text-2xl font-bold mb-4 text-green-700">三、架構視覺化 (Visuals)</h2>
            
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- CST Diagram -->
                <div class="border p-4 rounded bg-white">
                    <h3 class="text-center font-bold mb-2 text-gray-700">情境 A: CST (一般 STP/RSTP)</h3>
                    <p class="text-xs text-center text-gray-500 mb-2">VLAN 10 和 VLAN 20 被迫走同一條路，連結 B 閒置</p>
                    <div class="mermaid">
                    graph TD
                        Core_Switch[核心交換機<br/>Root Bridge]
                        Access_Switch[存取交換機]
                        
                        Core_Switch -- "Link A (Forwarding)<br/>VLAN 10 & 20 通行" --> Access_Switch
                        Core_Switch -. "Link B (Blocking)<br/>VLAN 10 & 20 被阻擋" .- Access_Switch
                        
                        style Core_Switch fill:#f9f,stroke:#333,stroke-width:2px
                        style Access_Switch fill:#bbf,stroke:#333,stroke-width:2px
                        linkStyle 1 stroke:red,stroke-width:2px,stroke-dasharray: 5 5;
                    </div>
                </div>

                <!-- PVST Diagram -->
                <div class="border p-4 rounded bg-white">
                    <h3 class="text-center font-bold mb-2 text-gray-700">情境 B: Per-VLAN STP (PVST+ / Multi-STPD)</h3>
                    <p class="text-xs text-center text-gray-500 mb-2">達成負載平衡：Link A 載送 VLAN 10，Link B 載送 VLAN 20</p>
                    <div class="mermaid">
                    graph TD
                        subgraph "VLAN 10 拓撲"
                        Core1[核心交換機<br/>VLAN 10 Root]
                        end
                        
                        subgraph "VLAN 20 拓撲"
                        Core2[核心交換機<br/>VLAN 20 Secondary]
                        end
                        
                        Access[存取交換機]

                        Core1 === Core2
                        
                        Core1 -- "Link A<br/>VLAN 10: FWD<br/>VLAN 20: BLK" --> Access
                        Core2 -- "Link B<br/>VLAN 20: FWD<br/>VLAN 10: BLK" --> Access
                        
                        style Core1 fill:#f9f,stroke:#333
                        style Access fill:#bbf,stroke:#333
                        style Core2 fill:#f9f,stroke:#333
                    </div>
                </div>
            </div>

            <div class="mt-8">
                <h3 class="font-bold text-gray-700 mb-2">BPDU 處理流程 (Sequence Diagram)</h3>
                <div class="mermaid">
                sequenceDiagram
                    participant SW_A as Switch A (Root)
                    participant SW_B as Switch B (Non-Root)
                    
                    Note over SW_A, SW_B: 標準 CST (802.1d/w)
                    SW_A->>SW_B: 發送 Untagged BPDU (代表所有 VLAN)
                    SW_B-->>SW_A: 根據單一 BPDU 計算 Port 狀態
                    
                    Note over SW_A, SW_B: Per-VLAN STP
                    SW_A->>SW_B: 發送 VLAN 10 Tagged BPDU
                    SW_A->>SW_B: 發送 VLAN 20 Tagged BPDU
                    SW_B-->>SW_A: VLAN 10 計算: Port 1 Forwarding
                    SW_B-->>SW_A: VLAN 20 計算: Port 1 Blocking
                </div>
            </div>
        </section>

        <!-- Section 4: Use Case -->
        <section id="usecase" class="bg-white rounded-lg shadow-md p-8 border-l-4 border-orange-600">
            <h2 class="text-2xl font-bold mb-4 text-orange-700">四、實務應用場景 (Use Case)</h2>
            
            <div class="bg-orange-50 p-6 rounded-lg mb-6">
                <h3 class="font-bold text-xl mb-2">案例：企業園區網路頻寬最佳化</h3>
                <p class="mb-4"><strong>情境：</strong>某科技園區大樓，連接 Core Switch 與 Edge Switch 之間有兩條 10G 光纖線路。網管人員希望充分利用這 20G 的頻寬，而不是讓其中一條 10G 閒置做為備援。</p>
                
                <div class="grid md:grid-cols-2 gap-4 mt-4">
                    <div class="bg-white p-4 rounded shadow">
                        <h4 class="font-bold text-red-600">使用一般 STP (CST) 的結果</h4>
                        <p class="text-sm mt-2">Switch 會偵測到環路 (Loop)，為了防止廣播風暴，STP 會強制將其中一條 10G 線路 Block 掉。</p>
                        <p class="text-sm mt-2"><strong>結果：</strong>總頻寬只有 10G，另外 10G 被浪費。若主要線路擁塞，備援線路依然在睡覺。</p>
                    </div>
                    <div class="bg-white p-4 rounded shadow">
                        <h4 class="font-bold text-green-600">使用 Per-VLAN STP 的結果</h4>
                        <p class="text-sm mt-2">網管人員設定：</p>
                        <ul class="list-disc list-inside text-sm pl-2">
                            <li>VLAN 1-50 的 Root Bridge 設為 Core-A (流量走左邊光纖)。</li>
                            <li>VLAN 51-100 的 Root Bridge 設為 Core-B (流量走右邊光纖)。</li>
                        </ul>
                        <p class="text-sm mt-2"><strong>結果：</strong>兩條光纖同時運作 (Active/Active)，達成 Load Sharing，總頻寬利用率接近 20G。</p>
                    </div>
                </div>
            </div>

            <h3 class="font-bold text-lg mb-2">優缺點分析</h3>
            <ul class="space-y-2">
                <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mt-1 mr-2"></i> <strong>優點：</strong> 實現 L2 負載平衡 (Load Balancing)、故障隔離範圍較小 (VLAN 10 的 Loop 不一定會讓 VLAN 20 癱瘓)。</li>
                <li class="flex items-start"><i class="fas fa-times-circle text-red-500 mt-1 mr-2"></i> <strong>缺點：</strong> 交換機 CPU 負擔重 (VLAN 越多負擔越重)、設定較複雜、不同廠商間的相容性較差 (例如 Cisco PVST 接到只跑 CST 的設備可能會有 PVID 不一致問題)。</li>
            </ul>
        </section>

        <!-- Section 5: Special Case Study -->
        <section id="special-case" class="bg-white rounded-lg shadow-md p-8 border-l-4 border-red-600">
            <h2 class="text-2xl font-bold mb-4 text-red-700">五、經典案例分析：CST (802.1w) 的 VLAN 阻斷災難</h2>
            
            <div class="bg-red-50 p-6 rounded-lg mb-6">
                <h3 class="font-bold text-xl mb-4 text-red-900"><i class="fas fa-exclamation-circle mr-2"></i>致命的雙 Access Link 架構</h3>
                <div class="grid md:grid-cols-2 gap-4 mb-4 text-sm">
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>Switch A (Root, 802.1w CST):</strong><br>Port 1 (VLAN 10 Untagged)<br>Port 2 (VLAN 20 Untagged)</li>
                        <li><strong>Switch B (Non-Root, 802.1w CST):</strong><br>Port 1 (VLAN 10 Untagged)<br>Port 2 (VLAN 20 Untagged)</li>
                    </ul>
                    <div class="bg-white p-2 rounded border border-red-200">
                        <p class="font-bold text-center text-red-600 mb-1">預期 vs 現實</p>
                        <p><strong>預期：</strong> Link 1 傳 VLAN 10，Link 2 傳 VLAN 20，兩者互不干擾。</p>
                        <p><strong>現實：</strong> <span class="bg-red-100 font-bold px-1">VLAN 20 斷線。</span></p>
                    </div>
                </div>
                
                <div class="mermaid">
                    graph TD
                        subgraph SA ["Switch A (Root Bridge - CST)"]
                        A1[Port 1<br>VLAN 10]
                        A2[Port 2<br>VLAN 20]
                        end
                        
                        subgraph SB ["Switch B (Non-Root - CST)"]
                        B1[Port 1<br>VLAN 10]
                        B2[Port 2<br>VLAN 20]
                        end

                        A1 -- "Link 1: Untagged BPDU<br/>(Forwarding)" --> B1
                        A2 -. "Link 2: Untagged BPDU<br/>(BLOCKED by CST)" .-> B2

                        style A1 fill:#bbf
                        style A2 fill:#f9f
                        style B1 fill:#bbf
                        style B2 fill:#f9f
                        linkStyle 1 stroke:red,stroke-width:3px,stroke-dasharray: 5 5;
                </div>
            </div>

            <div class="space-y-4">
                <div class="bg-white p-4 rounded shadow border-l-4 border-gray-500">
                    <h4 class="font-bold text-lg mb-2 text-gray-800">災難發生原理 (Mechanism of Failure)</h4>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li><strong>CST 的單一視角：</strong> 802.1w (CST) 在整台交換機上只有<strong>一個</strong> STP 實例 (Instance)。它不認得 VLAN 標籤 (因為是 Access Port，BPDU 也不帶 Tag)。</li>
                        <li><strong>收到兩份 BPDU：</strong> Switch A 身為 Root，會從 Port 1 和 Port 2 同時發送標準 BPDU。Switch B 在 Port 1 和 Port 2 都收到了這份 BPDU。</li>
                        <li><strong>誤判為環路：</strong> Switch B 的 STP 邏輯判斷：「我有兩個 Port 連接到同一個 Root Bridge，這是一個 Loop！」</li>
                        <li><strong>執行阻斷：</strong> 為了消除 Loop，STP 必須 Block 其中一個 Port。假設 Port 2 ID 較大，STP 將 Port 2 設為 <strong>Blocking (Discarding)</strong>。</li>
                        <li><strong>業務中斷：</strong> Port 2 被 Block 後，實體線路不通。但 Port 2 是 VLAN 20 <strong>唯一</strong> 的路徑。結果導致 VLAN 20 完全無法通訊，即使它根本沒有與 VLAN 10 形成 L2 Loop。</li>
                    </ol>
                </div>

                <div class="bg-green-50 p-4 rounded shadow border-l-4 border-green-500">
                    <h4 class="font-bold text-lg mb-2 text-green-800">如何修正 (Solution)？</h4>
                    <p class="text-sm text-green-900 mb-2">如果你必須這樣接線 (不使用 Trunk)，你必須改變 STP 模式：</p>
                    <ul class="list-disc list-inside text-sm text-green-800">
                        <li><strong>解法 A (Cisco):</strong> 改用 <strong>PVST+</strong>。它會為 VLAN 10 和 VLAN 20 建立獨立的樹，Port 2 只會在 VLAN 20 的樹中運作，不會被 VLAN 10 的拓撲影響。</li>
                        <li><strong>解法 B (Standard):</strong> 改用 <strong>MSTP (802.1s)</strong>。建立兩個 Instance (MSTI)，將 VLAN 10 放入 Instance 1，VLAN 20 放入 Instance 2。</li>
                        <li><strong>解法 C (Extreme):</strong> 建立兩個 <strong>STPD</strong> (例如 s0 和 s1)，分別加入 VLAN 10 和 VLAN 20。</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 6: Quiz -->
        <section id="quiz" class="bg-white rounded-lg shadow-md p-8 border-l-4 border-indigo-600">
            <h2 class="text-2xl font-bold mb-4 text-indigo-700">六、隨堂測驗 (Quiz)</h2>
            <p class="mb-6 text-gray-600">請嘗試回答以下問題，點擊選項查看結果。</p>

            <div class="space-y-6">
                <!-- Q1 -->
                <div class="quiz-item border-b pb-4">
                    <p class="font-bold mb-2">1. 關於 CST (802.1d) 與 Per-VLAN STP 的主要差異，下列何者正確？</p>
                    <div class="space-y-2">
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">A. CST 支援負載平衡，Per-VLAN 不支援</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, true)">B. CST 所有 VLAN 共用一個拓撲實例，Per-VLAN 每個 VLAN 獨立計算</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">C. CST 的 CPU 使用率通常比 Per-VLAN 高</button>
                    </div>
                    <div class="reveal-answer mt-2 p-3 bg-indigo-50 text-indigo-800 rounded">
                        <strong>解析：</strong> 正解為 B。CST 是單一實例，資源消耗低但無負載平衡；Per-VLAN 是多實例。
                    </div>
                </div>

                <!-- Q2 -->
                <div class="quiz-item border-b pb-4">
                    <p class="font-bold mb-2">2. 如果你在一個擁有 500 個 VLAN 的網路上啟用 Cisco PVST+，最可能遇到什麼風險？</p>
                    <div class="space-y-2">
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">A. 網路頻寬會減半</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, true)">B. 交換機 CPU 負載過高，導致控制層面不穩</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">C. 只能支援 100Mbps 的速度</button>
                    </div>
                    <div class="reveal-answer mt-2 p-3 bg-indigo-50 text-indigo-800 rounded">
                        <strong>解析：</strong> 正解為 B。每一個 VLAN 都要跑一個 STP Process，500 個 VLAN 對 CPU 是巨大負擔。這也是後來 MSTP (802.1s) 被發明的原因。
                    </div>
                </div>

                <!-- Q3 -->
                <div class="quiz-item border-b pb-4">
                    <p class="font-bold mb-2">3. 在 ExtremeXOS 中，若要達成類似 PVST 的效果，通常會使用什麼物件？</p>
                    <div class="space-y-2">
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">A. VRRP</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">B. EAPS</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, true)">C. STPD (Spanning Tree Domain)</button>
                    </div>
                    <div class="reveal-answer mt-2 p-3 bg-indigo-50 text-indigo-800 rounded">
                        <strong>解析：</strong> 正解為 C。Extreme 使用 STPD 來隔離不同的 STP 運算域，可將不同 VLAN 對應到不同 STPD。EAPS 是 Extreme 專有的環狀保護協定，非 STP。
                    </div>
                </div>

                 <!-- Q4 -->
                <div class="quiz-item border-b pb-4">
                    <p class="font-bold mb-2">4. 為什麼標準 802.1w (RSTP) 通常被認為無法達成 L2 流量負載分擔？</p>
                    <div class="space-y-2">
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, true)">A. 因為它只有一個 Root Bridge，且所有 VLAN 的 Blocking Port 位置相同</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">B. 因為它不支援 Full Duplex</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">C. 因為它的收斂速度太慢</button>
                    </div>
                    <div class="reveal-answer mt-2 p-3 bg-indigo-50 text-indigo-800 rounded">
                        <strong>解析：</strong> 正解為 A。單一樹狀結構 (Single Tree) 意味著只有一套轉發邏輯，無法讓 VLAN A 走左邊、VLAN B 走右邊。
                    </div>
                </div>

                 <!-- Q5 -->
                <div class="quiz-item border-b pb-4">
                    <p class="font-bold mb-2">5. 若希望結合 CST 的低資源消耗與 PVST 的負載平衡優點，目前的最佳實踐標準協定是？</p>
                    <div class="space-y-2">
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">A. RIPv2</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, true)">B. MSTP (802.1s)</button>
                        <button class="quiz-option w-full text-left p-3 rounded border" onclick="checkAnswer(this, false)">C. MPLS</button>
                    </div>
                    <div class="reveal-answer mt-2 p-3 bg-indigo-50 text-indigo-800 rounded">
                        <strong>解析：</strong> 正解為 B。MSTP (Multiple Spanning Tree) 允許將多個 VLAN 群組 (Instance) 映射到同一個樹上，既能負載平衡 (透過不同 Instance)，又能節省 CPU (不需每個 VLAN 一個樹)。
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 p-6 mt-12 text-center text-sm">
        <p class="mb-2">Planning & Design by Timmy(timmyc@hauman.com.tw)</p>
        <p class="mb-2">豪勉科技 Hauman Technologies Corporation | Ver 1.0</p>
        <p class="text-xs mt-4 opacity-50">Designed with ExtremeXOS expertise.</p>
    </footer>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });

        function checkAnswer(btn, isCorrect) {
            // Reset parent styles
            let parent = btn.parentElement;
            let options = parent.getElementsByClassName('quiz-option');
            for(let opt of options) {
                opt.classList.remove('bg-green-100', 'bg-red-100', 'border-green-500', 'border-red-500');
            }

            // Apply style based on correctness
            if (isCorrect) {
                btn.classList.add('bg-green-100', 'border-green-500');
                btn.innerHTML += ' <i class="fas fa-check text-green-600"></i>';
            } else {
                btn.classList.add('bg-red-100', 'border-red-500');
                btn.innerHTML += ' <i class="fas fa-times text-red-600"></i>';
            }

            // Show explanation
            let explanation = parent.nextElementSibling;
            explanation.style.display = 'block';
        }
    </script>
</body>
</html>