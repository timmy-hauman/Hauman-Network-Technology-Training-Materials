<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extreme XOS ç¶²è·¯æ¶æ§‹å¤§å¸« - è·¨å» å•† MLAG èˆ‡ STP æ•´åˆå¯¦æˆ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            flex: 1; 
        }

        h1 { color: #4f46e5; }
        h2 { color: #1e3a8a; border-left: 5px solid #4f46e5; padding-left: 1rem; margin-top: 2rem; }
        h3 { color: #374151; margin-top: 1.5rem; }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .highlight {
            background-color: #e0e7ff;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: monospace;
            color: #4338ca;
        }

        /* ä¿®æ­£ Code Block æ¨£å¼ï¼Œä½¿ç”¨ pre ä¸¦ä¿ç•™æ›è¡Œ */
        .code-block {
            background-color: #1f2937;
            color: #e5e7eb;
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            overflow-x: auto;
            margin-top: 0.5rem;
            white-space: pre; /* é—œéµä¿®æ­£ï¼šä¿ç•™æ›è¡Œ */
            line-height: 1.6;
            font-size: 0.9rem;
            border-left: 5px solid #a855f7; /* ç´«è‰²è£é£¾é‚Š */
        }

        .comment {
            color: #9ca3af;
            font-style: italic;
        }

        .command {
            color: #a5b4fc;
        }

        .parameter {
            color: #fcd34d;
        }

        .quiz-option {
            transition: all 0.2s;
            cursor: pointer;
        }
        .quiz-option:hover {
            background-color: #f3f4f6;
        }
        .quiz-option.correct {
            background-color: #d1fae5;
            border-color: #10b981;
            color: #065f46;
        }
        .quiz-option.wrong {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }

        .footer {
            background-color: #1f2937;
            color: #9ca3af;
            text-align: center;
            padding: 1rem;
            font-size: 0.875rem;
            margin-top: auto; 
        }

        .mermaid-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            align-items: center;
        }
        
        .explanation-box {
            background-color: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .error-path-box {
            background-color: #fef2f2;
            border: 1px solid #fee2e2;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .solution-box {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            background-color: #f9fafb;
        }
        
        .solution-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            margin-left: 0.75rem;
            text-transform: uppercase;
        }
        
        .badge-green { background-color: #d1fae5; color: #065f46; }
        .badge-purple { background-color: #e9d5ff; color: #6b21a8; }
        .badge-blue { background-color: #dbeafe; color: #1e40af; }
        
        .warning-box {
            background-color: #fff7ed;
            border: 1px solid #fdba74;
            color: #9a3412;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>

    <div class="container">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold mb-2">è·¨å» å•† MLAG èˆ‡ STP æ•´åˆå¯¦æˆ°</h1>
            <p class="text-lg text-gray-600">è§£æ±º Cisco Switch åœ¨ Extreme MLAG ç’°å¢ƒä¸‹ Port Blocking çš„ç¶“å…¸æ¡ˆä¾‹</p>
            <div class="mt-4 inline-block bg-indigo-100 text-indigo-800 text-sm font-medium px-3 py-1 rounded-full">Extreme XOS ç¶²è·¯æ¶æ§‹å¤§å¸«</div>
        </header>

        <!-- ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ -->
        <section class="card">
            <h2 class="text-2xl font-bold mb-4">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ (Concept)</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-bold text-lg">ä¸€å¥è©±å®šç¾©</h3>
                    <p class="text-gray-700">ç•¶äº¤æ›å™¨é—œé–‰ STP æ™‚ï¼Œå®ƒæœƒè®Šæˆä¸€å€‹ã€Œé€æ˜çš„åå°„é¡ã€ï¼Œå°è‡´é€£æ¥çš„å°ç«¯è¨­å‚™æ”¶åˆ°è‡ªå·±ç™¼å‡ºçš„å°åŒ…è€Œèª¤åˆ¤ç‚ºè¿´åœˆã€‚</p>
                </div>
                
                <div class="explanation-box">
                    <h3 class="font-bold text-lg mb-2">ğŸ’¡ ç”Ÿæ´»åŒ–æ¯”å–»ï¼šå›éŸ³å±±è°·</h3>
                    <p>æƒ³åƒ <strong>Cisco Switch</strong> æ˜¯ä¸€å€‹äººç«™åœ¨å±±è°·é‚Šç·£ï¼Œå°è‘—å°é¢å¤§å–Šã€Œå–‚ï½ã€(ç™¼é€ BPDU å°åŒ…)ã€‚</p>
                    <p class="mt-2">è€Œ <strong>Extreme Switch (é—œé–‰ STP)</strong> å°±åƒä¸€åº§å…‰æ»‘çš„å±±å£ï¼Œå®ƒä¸ç†è§£é€™è²ã€Œå–‚ã€çš„å«ç¾©ï¼Œåªæ˜¯å–®ç´”åœ°æŠŠè²éŸ³<strong>åå°„</strong>å›ä¾†ã€‚</p>
                    <p class="mt-2">ç•¶ Cisco è½åˆ°è‡ªå·±çš„è²éŸ³å‚³å›ä¾†æ™‚ï¼Œå®ƒæœƒä»¥ç‚ºå°é¢æœ‰å¦ä¸€å€‹äºº(æˆ–å¦ä¸€æ¢è·¯)ï¼Œæˆ–è€…èªç‚ºè²éŸ³åœ¨æ‰“è½‰(è¿´åœˆ)ï¼Œç‚ºäº†å®‰å…¨èµ·è¦‹ï¼Œå®ƒç«‹åˆ»æ‘€ä½è€³æœµ(Block Port)æ‹’çµ•æ¥æ”¶è¨Šæ¯ã€‚</p>
                </div>
            </div>
        </section>

        <!-- äºŒã€æ‚¨çš„æ¶æ§‹æ¡ˆä¾‹è¨ºæ–· -->
        <section class="card border-l-8 border-red-500">
            <h2 class="text-2xl font-bold mb-4 text-red-800">äºŒã€æ‚¨çš„æ¶æ§‹æ¡ˆä¾‹è¨ºæ–· (Topology Diagnosis)</h2>
            <p class="text-gray-700 mb-4">æ ¹æ“šæ‚¨æè¿°çš„æ¶æ§‹ï¼šExtreme A/B é€é ISC é€£æ¥ï¼Œä¸¦åŒæ™‚ä¸‹æ¥ Cisco 9200 èˆ‡ 9500ã€‚ç•¶ **Extreme ç«¯é—œé–‰ STP** æ™‚ï¼Œå•é¡Œç™¼ç”Ÿçš„ç²¾ç¢ºè·¯å¾‘å¦‚ä¸‹ï¼š</p>
            
            <div class="mermaid-container">
                <div class="w-full text-center">
                    <h4 class="font-bold text-gray-800 mb-2">æ¡ˆä¾‹æ‹“æ’²èˆ‡æ•…éšœè·¯å¾‘ (BPDU åå°„)</h4>
                    <div class="mermaid">
                    graph TD
                        %% å®šç¾©ç¯€é» (Nodes)
                        subgraph Core_Layer
                            direction TB
                            EA[Extreme A]
                            EB[Extreme B]
                            ISC[ISC Link]
                        end
                        
                        subgraph Access_Layer
                            direction TB
                            C92[Cisco 9200]
                            C95[Cisco 9500]
                        end

                        %% å®šç¾©é€£ç·š (Links) - ä¾åºå®šç¾©ä»¥ç¢ºä¿ç´¢å¼•æ­£ç¢º
                        %% Index 0: C92 -> EA
                        C92 -- Port 1 BPDU --> EA
                        
                        %% Index 1: EA -> ISC (Flood)
                        EA == Flood ==> ISC
                        
                        %% Index 2: ISC -> EB (Flood)
                        ISC == Flood ==> EB
                        
                        %% Index 3: EB -> C92 (Return)
                        EB -- Return BPDU --> C92
                        
                        %% Index 4: C95 -> EA
                        C95 -- Port 1 BPDU --> EA
                        
                        %% Index 5: EB -> C95 (Return)
                        EB -- Return BPDU --> C95

                        %% æ¨£å¼è¨­å®š (Styles)
                        style ISC fill:#ffe4e6,stroke:red,stroke-width:2px
                        
                        %% ç´…è‰²è·¯å¾‘æ¨™ç¤ºå±éšªæµå‘ (Indices 1, 2, 3, 5)
                        linkStyle 1,2,3,5 stroke:red,stroke-width:3px
                    </div>
                    <p class="text-sm text-gray-500 mt-2">ç²—ç´…ç·šè¡¨ç¤º BPDU ç•°å¸¸æµå‹•è·¯å¾‘ (å¾ A ç¶“ ISC åˆ° B å†å›åˆ° Cisco)</p>
                </div>
            </div>

            <div class="error-path-box">
                <h3 class="font-bold text-red-700 mb-2">âš ï¸ ç‚ºä»€éº¼æœƒ Blockï¼Ÿ(è©³ç´°æ­¥é©Ÿ)</h3>
                <ol class="list-decimal pl-5 space-y-2 text-gray-800">
                    <li><strong>Cisco ç™¼é€ï¼š</strong> Cisco 9200 çš„ Port 1 ç™¼å‡º STP BPDU å°åŒ…ã€‚</li>
                    <li><strong>Extreme é€å‚³ï¼š</strong> Extreme A æ”¶åˆ°å°åŒ…ï¼Œå› ç‚ºé—œé–‰äº† STPï¼Œå®ƒä¸é€²è¡Œè™•ç†ï¼Œè€Œæ˜¯å°‡å…¶è¦–ç‚ºä¸€èˆ¬ Multicast å°åŒ…ï¼Œä¸¦æ ¹æ“š VLAN è¦å‰‡è½‰ç™¼åˆ° ISC Linkã€‚</li>
                    <li><strong>ISC æ³›æ´ªï¼š</strong> å°åŒ…ç©¿é ISC åˆ°é” Extreme Bã€‚</li>
                    <li><strong>è¿´åœˆå®Œæˆï¼š</strong> Extreme B åŒæ¨£ä¸è™•ç† STPï¼Œå°‡å°åŒ…è½‰ç™¼çµ¦å±¬æ–¼åŒ VLAN çš„ Port 1 (é€£æ¥ Cisco 9200 Port 2)ã€‚</li>
                    <li><strong>è‡ªæˆ‘åµæ¸¬ï¼š</strong> Cisco 9200 çš„ Port 2 æ”¶åˆ°äº† Port 1 ç™¼å‡ºçš„ BPDUã€‚Cisco åˆ¤å®šé€™æ˜¯å¤–éƒ¨è¿´åœˆï¼Œéš¨å³å°é– Port 2ã€‚</li>
                </ol>
            </div>
        </section>

        <!-- ä¸‰ã€è§£æ±ºæ–¹æ¡ˆèˆ‡è¨­å®šå¯¦æˆ° -->
        <section class="card">
            <h2 class="text-2xl font-bold mb-4">ä¸‰ã€è§£æ±ºæ–¹æ¡ˆèˆ‡è¨­å®šå¯¦æˆ° (Solutions & Configuration)</h2>
            <p class="text-gray-600 mb-6">è§£æ±ºæ­¤å•é¡Œçš„é—œéµåœ¨æ–¼æ‰“ç ´ã€Œé€æ˜åå°„ã€ç‹€æ…‹ã€‚Extreme Switch å¿…é ˆä¸»å‹•åƒèˆ‡ STP é‹ç®—ï¼Œæ””æˆªä¸¦è™•ç† Cisco çš„ BPDUã€‚ä»¥ä¸‹æä¾›ä¸‰ç¨®æ–¹æ¡ˆã€‚</p>

            <!-- æ–¹æ¡ˆ A: MSTP -->
            <div class="solution-box border-l-4 border-green-500">
                <div class="solution-title text-green-800">
                    æ–¹æ¡ˆ Aï¼šMSTP (Multiple Spanning Tree)
                    <span class="badge badge-green">å®˜æ–¹æ¨è–¦</span>
                </div>
                <p class="text-gray-700 mb-4">
                    <strong>åŸç†ï¼š</strong> ä½¿ç”¨æ¨™æº– 802.1s å”å®šã€‚æ‰€æœ‰ VLAN å°æ‡‰åˆ° Instance 0 (CIST)ï¼Œèˆ‡ Cisco çš„ VLAN 1 é€²è¡Œäº’é€šã€‚é€™æ˜¯è³‡æºæ¶ˆè€—æœ€ä½ã€æœ€ç©©å®šçš„ä½œæ³•ã€‚<br>
                    <strong>é—œéµè¨­å®šï¼š</strong> Switch A è¨­ç‚º Root (4096)ï¼ŒSwitch B è¨­ç‚º Backup (8192)ã€‚
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-bold text-gray-700 mb-2">Extreme A (Root Bridge)</h4>
<pre class="code-block">
<span class="comment"># å»ºç«‹ MSTP ä¸¦è¨­å®šç‚ºæœ€é«˜å„ªå…ˆæ¬Š</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">mode</span> <span class="parameter">mstp</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">priority</span> <span class="parameter">4096</span>

<span class="comment"># åŠ å…¥æ‰€æœ‰æ¥­å‹™ VLAN èˆ‡ ISC VLAN</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan10</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan20</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">isc_vlan</span>

<span class="comment"># å•Ÿç”¨ Port èˆ‡å…¨åŸŸ STP</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span> <span class="command">ports</span> <span class="parameter">all</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span>
</pre>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-700 mb-2">Extreme B (Backup Root)</h4>
<pre class="code-block">
<span class="comment"># å»ºç«‹ MSTP ä¸¦è¨­å®šç‚ºæ¬¡é«˜å„ªå…ˆæ¬Š</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">mode</span> <span class="parameter">mstp</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">priority</span> <span class="parameter">8192</span>

<span class="comment"># åŠ å…¥æ‰€æœ‰æ¥­å‹™ VLAN èˆ‡ ISC VLAN</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan10</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan20</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">isc_vlan</span>

<span class="comment"># å•Ÿç”¨ Port èˆ‡å…¨åŸŸ STP</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span> <span class="command">ports</span> <span class="parameter">all</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span>
</pre>
                    </div>
                </div>
            </div>

            <!-- æ–¹æ¡ˆ B: Per-VLAN STP -->
            <div class="solution-box border-l-4 border-purple-500">
                <div class="solution-title text-purple-800">
                    æ–¹æ¡ˆ Bï¼šPer-VLAN STP (Multiple STPDs)
                    <span class="badge badge-purple">é€²éšæ›¿ä»£</span>
                </div>
                <p class="text-gray-700 mb-4">
                    <strong>åŸç†ï¼š</strong> é€éåœ¨ Extreme ä¸Šå»ºç«‹å¤šå€‹ç¨ç«‹çš„ STPD (å¦‚ s10, s20) ä¾†æ¨¡æ“¬ Cisco PVST+ è¡Œç‚ºã€‚æ¯å€‹ VLAN ç¨ç«‹é‹ç®—ã€‚<br>
                    <strong>é©ç”¨å ´æ™¯ï¼š</strong> VLAN æ•¸é‡æ¥µå°‘ (< 5 å€‹) ä¸”å¿…é ˆèˆ‡ Cisco é€²è¡Œ Per-VLAN è² è¼‰å¹³è¡¡æ™‚ã€‚<br>
                    <strong>æ³¨æ„ï¼š</strong> CPU è² è¼‰è¼ƒé«˜ï¼Œè¨­å®šè¼ƒç¹ç‘£ã€‚
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-bold text-gray-700 mb-2">Extreme A (Root Bridge)</h4>
<pre class="code-block">
<span class="comment"># --- è¨­å®š VLAN 10 çš„ STP (s10) ---</span>
<span class="command">create stpd</span> <span class="parameter">s10</span>
<span class="command">configure stpd</span> <span class="parameter">s10</span> <span class="command">mode</span> <span class="parameter">rstp</span>
<span class="command">configure stpd</span> <span class="parameter">s10</span> <span class="command">add vlan</span> <span class="parameter">vlan10</span>
<span class="command">configure stpd</span> <span class="parameter">s10</span> <span class="command">priority</span> <span class="parameter">4096</span>
<span class="command">enable stpd</span> <span class="parameter">s10</span>

<span class="comment"># --- è¨­å®š VLAN 20 çš„ STP (s20) ---</span>
<span class="command">create stpd</span> <span class="parameter">s20</span>
<span class="command">configure stpd</span> <span class="parameter">s20</span> <span class="command">mode</span> <span class="parameter">rstp</span>
<span class="command">configure stpd</span> <span class="parameter">s20</span> <span class="command">add vlan</span> <span class="parameter">vlan20</span>
<span class="command">configure stpd</span> <span class="parameter">s20</span> <span class="command">priority</span> <span class="parameter">4096</span>
<span class="command">enable stpd</span> <span class="parameter">s20</span>
</pre>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-700 mb-2">Extreme B (Backup Root)</h4>
<pre class="code-block">
<span class="comment"># --- è¨­å®š VLAN 10 çš„ STP (s10) ---</span>
<span class="command">create stpd</span> <span class="parameter">s10</span>
<span class="command">configure stpd</span> <span class="parameter">s10</span> <span class="command">mode</span> <span class="parameter">rstp</span>
<span class="command">configure stpd</span> <span class="parameter">s10</span> <span class="command">add vlan</span> <span class="parameter">vlan10</span>
<span class="command">configure stpd</span> <span class="parameter">s10</span> <span class="command">priority</span> <span class="parameter">8192</span>
<span class="command">enable stpd</span> <span class="parameter">s10</span>

<span class="comment"># --- è¨­å®š VLAN 20 çš„ STP (s20) ---</span>
<span class="command">create stpd</span> <span class="parameter">s20</span>
<span class="command">configure stpd</span> <span class="parameter">s20</span> <span class="command">mode</span> <span class="parameter">rstp</span>
<span class="command">configure stpd</span> <span class="parameter">s20</span> <span class="command">add vlan</span> <span class="parameter">vlan20</span>
<span class="command">configure stpd</span> <span class="parameter">s20</span> <span class="command">priority</span> <span class="parameter">8192</span>
<span class="command">enable stpd</span> <span class="parameter">s20</span>
</pre>
                    </div>
                </div>
            </div>

            <!-- æ–¹æ¡ˆ C: RSTP (æ–°åŠ å…¥) -->
            <div class="solution-box border-l-4 border-blue-500">
                <div class="solution-title text-blue-800">
                    æ–¹æ¡ˆ Cï¼šRSTP (Rapid Spanning Tree)
                    <span class="badge badge-blue">ç°¡æ˜“é€šç”¨</span>
                </div>
                <p class="text-gray-700 mb-4">
                    <strong>åŸç†ï¼š</strong> ä½¿ç”¨å–®ä¸€ RSTP å¯¦ä¾‹ (Single Topology)ã€‚æ‰€æœ‰ VLAN å…±ç”¨åŒä¸€å€‹ç”Ÿæˆæ¨¹é‹ç®—çµæœã€‚Extreme é€é Native VLAN (é€šå¸¸æ˜¯ VLAN 1) èˆ‡ Cisco çš„ CST é€²è¡Œæºé€šã€‚<br>
                    <strong>é©ç”¨å ´æ™¯ï¼š</strong> ç¶²è·¯æ‹“æ’²ç°¡å–®ï¼Œä¸éœ€è¦å°ä¸åŒ VLAN é€²è¡Œæµé‡åˆ†æµ (Load Balancing) çš„ç’°å¢ƒã€‚<br>
                    <strong>æ³¨æ„ï¼š</strong> æ‰€æœ‰ VLAN çš„å°é–åŸ  (Blocking Port) éƒ½æœƒç›¸åŒã€‚
                </p>

                <!-- æ–°å¢ï¼šNative VLAN æ³¨æ„äº‹é … -->
                <div class="warning-box">
                    <h4 class="font-bold mb-1 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                        âš ï¸ é—œéµæ³¨æ„äº‹é …ï¼šNative VLAN ID å¿…é ˆä¸€è‡´
                    </h4>
                    <p class="text-sm">
                        åœ¨ä½¿ç”¨ RSTP èˆ‡ Cisco å°æ¥æ™‚ï¼Œé›™æ–¹çš„ <strong>Native VLAN (Untagged VLAN) å¿…é ˆå®Œå…¨ç›¸åŒ</strong> (é€šå¸¸é è¨­ç‚º VLAN 1)ã€‚<br>
                        å› ç‚º Cisco çš„ PVST+ æ˜¯é€é Native VLAN ä¾†ç™¼é€æ¨™æº– IEEE BPDU èˆ‡ Extreme çš„ RSTP æºé€šã€‚å¦‚æœå…©ç«¯ Native VLAN ä¸ä¸€è‡´ (ä¾‹å¦‚ä¸€é‚Šæ˜¯ VLAN 1ï¼Œå¦ä¸€é‚Šæ˜¯ VLAN 99)ï¼Œæœƒå°è‡´ <strong>PVID Mismatch</strong>ï¼Œé€ æˆ STP ç„¡æ³•æ”¶æ–‚æˆ–ç•°å¸¸ Blockingã€‚
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-bold text-gray-700 mb-2">Extreme A (Root Bridge)</h4>
<pre class="code-block">
<span class="comment"># è¨­å®šç‚º RSTP æ¨¡å¼</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">mode</span> <span class="parameter">rstp</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">priority</span> <span class="parameter">4096</span>

<span class="comment"># å°‡æ‰€æœ‰ VLAN åŠ å…¥åŒä¸€å€‹ RSTP ç¶²åŸŸ</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan10</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan20</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">isc_vlan</span>

<span class="comment"># å•Ÿç”¨ STP</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span> <span class="command">ports</span> <span class="parameter">all</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span>
</pre>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-700 mb-2">Extreme B (Backup Root)</h4>
<pre class="code-block">
<span class="comment"># è¨­å®šç‚º RSTP æ¨¡å¼</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">mode</span> <span class="parameter">rstp</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">priority</span> <span class="parameter">8192</span>

<span class="comment"># å°‡æ‰€æœ‰ VLAN åŠ å…¥åŒä¸€å€‹ RSTP ç¶²åŸŸ</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan10</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">vlan20</span>
<span class="command">configure stpd</span> <span class="parameter">s0</span> <span class="command">add vlan</span> <span class="parameter">isc_vlan</span>

<span class="comment"># å•Ÿç”¨ STP</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span> <span class="command">ports</span> <span class="parameter">all</span>
<span class="command">enable stpd</span> <span class="parameter">s0</span>
</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- å››ã€æ¶æ§‹è¦–è¦ºåŒ– (è§£æ±ºæ–¹æ¡ˆ) -->
        <section class="card">
            <h2 class="text-2xl font-bold mb-4">å››ã€è§£æ±ºæ–¹æ¡ˆè¦–è¦ºåŒ– (Visuals)</h2>
            <p class="mb-4 text-gray-600">å•Ÿç”¨ STP å¾Œï¼Œç¶²è·¯å°‡å½¢æˆç©©å®šçš„æ¨¹ç‹€çµæ§‹ï¼Œæ¶ˆé™¤ BPDU æ³›æ´ªã€‚</p>
            
            <div class="mermaid-container">
                <!-- åœ–è¡¨ 2: è§£æ±ºæ–¹æ¡ˆæ‹“æ’² -->
                <div class="w-full text-center">
                    <h4 class="font-bold text-green-600 mb-2">è§£æ±ºæ–¹æ¡ˆï¼šå•Ÿç”¨ MSTP/RSTP å»ºç«‹éšå±¤</h4>
                    <div class="mermaid">
                    graph TD
                        %% å®šç¾©ç¯€é»
                        subgraph MLAG_Domain_2 ["Root Bridge Domain"]
                            direction TB
                            EA_S[Extreme A]
                            EB_S[Extreme B]
                        end

                        subgraph Access_Layer_2 ["Downlink Access"]
                            direction TB
                            C92_S[Cisco 9200]
                            C95_S[Cisco 9500]
                        end

                        %% å®šç¾©é€£ç·š
                        EA_S ===|ISC Link| EB_S
                        
                        EA_S -->|BPDU Root| C92_S
                        EB_S -->|BPDU Root| C92_S
                        
                        EA_S -->|BPDU Root| C95_S
                        EB_S -->|BPDU Root| C95_S

                        %% æ¨£å¼
                        style EA_S fill:#d1fae5,stroke:#059669
                        style EB_S fill:#d1fae5,stroke:#059669
                        style C92_S fill:#fee2e2,stroke:#dc2626
                        style C95_S fill:#fee2e2,stroke:#dc2626
                        
                        %% é€£ç·šæ¨£å¼ (Index: 0=ISC, 1=EA-C92, 2=EB-C92, 3=EA-C95, 4=EB-C95)
                        linkStyle 1,2,3,4 stroke:#10b981,stroke-width:2px
                    </div>
                </div>
            </div>
        </section>

        <!-- äº”ã€å¯¦å‹™æ‡‰ç”¨å ´æ™¯ -->
        <section class="card">
            <h2 class="text-2xl font-bold mb-4">äº”ã€å¯¦å‹™æ‡‰ç”¨å ´æ™¯ (Use Case)</h2>
            <h3 class="font-bold text-lg">å ´æ™¯ï¼šä¼æ¥­æ ¸å¿ƒç¶²è·¯å‡ç´šèˆ‡èˆŠè¨­å‚™ä»‹æ¥</h3>
            <p class="text-gray-700 mt-2">
                ä¸€å®¶å¤§å‹è£½é€ æ¥­æ­£åœ¨å°‡æ ¸å¿ƒç¶²è·¯å‡ç´šç‚º Extreme MLAG æ¶æ§‹ï¼Œä½†æ¥å…¥å±¤ (Access Layer) ä»ä¿ç•™å¤§é‡çš„ Cisco Switchã€‚ç¶²ç®¡äººå“¡ç‚ºäº†ç°¡åŒ–è¨­å®šï¼ŒåˆæœŸåœ¨æ ¸å¿ƒäº¤æ›å™¨ä¸Šé—œé–‰äº† STPï¼Œèªç‚ºã€ŒMLAG æœ¬èº«å°±ç„¡è¿´åœˆã€ã€‚çµæœé€ æˆæ¥å…¥å±¤ Cisco Switch å¤§é¢ç© Port Blockingï¼Œå°è‡´ç”¢ç·šç¶²è·¯ä¸­æ–·ã€‚
            </p>

            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border-l-4 border-green-500 pl-4 py-2 bg-green-50">
                    <h4 class="font-bold text-green-800">å„ªé» (å•Ÿç”¨ MSTP/RSTP)</h4>
                    <ul class="list-disc pl-5 text-sm text-gray-700 mt-1">
                        <li><strong>é˜²æ­¢äººç‚ºç–å¤±ï¼š</strong> è‹¥æœ‰äººèª¤æ¥ç·šè·¯ï¼ŒSTP èƒ½å³æ™‚é˜»æ“‹ã€‚</li>
                        <li><strong>è·¨å» å•†ç›¸å®¹ï¼š</strong> ç¬¦åˆ IEEE æ¨™æº–ï¼Œè®“ Cisco æ­£å¸¸æ”¶æ–‚ã€‚</li>
                        <li><strong>ç¶²è·¯ç©©å®šï¼š</strong> æ¶ˆé™¤ BPDU æ³›æ´ªé€ æˆçš„å»£æ’­é›œè¨Šã€‚</li>
                    </ul>
                </div>
                <div class="border-l-4 border-red-500 pl-4 py-2 bg-red-50">
                    <h4 class="font-bold text-red-800">ç¼ºé»èˆ‡æŒ‘æˆ°</h4>
                    <ul class="list-disc pl-5 text-sm text-gray-700 mt-1">
                        <li><strong>è¨­å®šè¤‡é›œåº¦ï¼š</strong> éœ€è¦åŠƒ VLAN Instance èˆ‡ Priorityã€‚</li>
                        <li><strong>ç¶­é‹é–€æª»ï¼š</strong> ç®¡ç†å“¡éœ€ç†è§£ Root Bridge é¸èˆ‰æ©Ÿåˆ¶ã€‚</li>
                        <li><strong>PVST é™åˆ¶ï¼š</strong> è‹¥ä½¿ç”¨ RSTPï¼ŒCisco ç«¯å¿…é ˆåœ¨ VLAN 1 äº’é€šã€‚</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- å…­ã€éš¨å ‚æ¸¬é©— -->
        <section class="card">
            <h2 class="text-2xl font-bold mb-4">å…­ã€éš¨å ‚æ¸¬é©— (Quiz)</h2>
            <div id="quiz-container" class="space-y-6">
                <!-- é¡Œç›®å°‡ç”± JavaScript ç”Ÿæˆ -->
            </div>
        </section>
    </div>

    <footer class="footer">
        Planning & Design by Timmy(timmyc@hauman.com.tw) | è±ªå‹‰ç§‘æŠ€ Hauman Technologies Corporation | Ver 2.0
    </footer>

    <script>
        // åˆå§‹åŒ– Mermaid
        mermaid.initialize({ startOnLoad: true });

        // æ¸¬é©—è³‡æ–™
        const quizData = [
            {
                question: "1. åœ¨é›™å±¤ LACP æ¶æ§‹ä¸­ï¼Œç‚ºä»€éº¼ Extreme é—œé–‰ STP æœƒå°è‡´ Cisco Port Blockï¼Ÿ",
                options: [
                    "å› ç‚º Extreme çš„ LACP èˆ‡ Cisco ä¸ç›¸å®¹",
                    "å› ç‚º Extreme è®Šæˆé€æ˜å‚³è¼¸æ¨¡å¼ï¼Œåå°„äº† Cisco çš„ BPDU",
                    "å› ç‚º Cisco 9200 æ•ˆèƒ½ä¸è¶³",
                    "å› ç‚º ISC Link æ–·ç·š"
                ],
                answer: 1,
                explanation: "æ­£è§£ï¼šExtreme é—œé–‰ STP å¾Œï¼Œæœƒå°‡æ”¶åˆ°çš„ BPDU ç¶“ç”± ISC è½‰ç™¼ï¼Œå°è‡´ Cisco æ”¶åˆ°è‡ªå·±ç™¼å‡ºçš„ BPDU è€Œè§¸ç™¼ç’°è·¯ä¿è­·ã€‚"
            },
            {
                question: "2. åœ¨ Extreme MLAG ç’°å¢ƒä¸­ï¼Œç‚ºäº†èˆ‡ Cisco PVST+ å®Œç¾ä»‹æ¥ï¼Œå®˜æ–¹æœ€ä½³å¯¦è¸å»ºè­°ä½¿ç”¨å“ªç¨®å”å®šï¼Ÿ",
                options: [
                    "é—œé–‰æ‰€æœ‰ STP",
                    "MSTP (Multiple Spanning Tree Protocol)",
                    "RIP (Routing Information Protocol)",
                    "LACP (Link Aggregation Control Protocol)"
                ],
                answer: 1,
                explanation: "æ­£è§£ï¼šMSTP æ˜¯è™•ç† MLAG ç’°å¢ƒèˆ‡å¤š VLAN è² è¼‰å¹³è¡¡çš„æœ€ä½³å¯¦è¸ï¼Œä¸”æ¨™æº–ç›¸å®¹æ€§é«˜ã€‚"
            },
            {
                question: "3. è‹¥è¦åœ¨ Extreme Switch ä¸Šè¨­å®šå…¶ç‚º Root Bridgeï¼Œæ‡‰å°‡ Priority è¨­å®šç‚ºå¤šå°‘æœ€åˆé©ï¼Ÿ",
                options: [
                    "32768 (é è¨­å€¼)",
                    "65535 (æœ€å¤§å€¼)",
                    "4096 (è¼ƒä½å€¼)",
                    "0 (é›–ç„¶æ˜¯æœ€å°ï¼Œä½†é€šå¸¸ä¿ç•™ï¼Œ4096æ˜¯å¸¸è¦‹çš„æœ€ä½³è¨­å®š)"
                ],
                answer: 2,
                explanation: "æ­£è§£ï¼šSTP Priority æ•¸å€¼è¶Šå°è¶Šå„ªå…ˆã€‚4096 è¶³å¤ å°ä»¥ç¢ºä¿æˆç‚º Rootï¼Œä¸”ç¬¦åˆ 4096 çš„å€æ•¸è¦å‰‡ã€‚"
            },
            {
                question: "4. å¦‚æœä½¿ç”¨ã€ŒPer-VLAN STPã€æ–¹æ¡ˆ (Multiple STPDs)ï¼Œæœ€å¤§çš„æ½›åœ¨é¢¨éšªæ˜¯ä»€éº¼ï¼Ÿ",
                options: [
                    "ç„¡æ³•èˆ‡ Cisco ç›¸å®¹",
                    "Switch CPU è³‡æºæ¶ˆè€—éé«˜ï¼ŒVLAN å¤šæ™‚å¯èƒ½å½±éŸ¿æ•ˆèƒ½",
                    "ç„¡æ³•è¨­å®š Priority",
                    "ISC ç·šè·¯ç„¡æ³•å‚³é€è³‡æ–™"
                ],
                answer: 1,
                explanation: "æ­£è§£ï¼šæ¯å€‹ STPD éƒ½æ˜¯ä¸€å€‹ç¨ç«‹çš„é‹ç®—ç¨‹åºã€‚å¦‚æœ VLAN æ•¸é‡é”åˆ°æ•¸åå€‹ç”šè‡³æ›´å¤šï¼ŒCPU è² è¼‰æœƒé¡¯è‘—å¢åŠ ã€‚"
            },
            {
                question: "5. Extreme EXOS è¨­å®š RSTP çš„æŒ‡ä»¤ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ",
                options: [
                    "configure stp mode pvst",
                    "configure stpd s0 mode rstp",
                    "enable spanning-tree rapid",
                    "set protocol rstp on"
                ],
                answer: 1,
                explanation: "æ­£è§£ï¼šåœ¨ EXOS ä¸­ï¼ŒæŒ‡ä»¤æ ¼å¼ç‚º `configure stpd <domain> mode <mode>`ã€‚"
            }
        ];

        // ç”Ÿæˆæ¸¬é©— HTML
        const quizContainer = document.getElementById('quiz-container');

        quizData.forEach((q, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('border-b', 'pb-4', 'border-gray-200');
            
            const title = document.createElement('h4');
            title.classList.add('font-bold', 'text-lg', 'mb-3');
            title.innerText = q.question;
            questionDiv.appendChild(title);

            const optionsDiv = document.createElement('div');
            optionsDiv.classList.add('space-y-2');

            q.options.forEach((opt, optIndex) => {
                const btn = document.createElement('div');
                btn.classList.add('quiz-option', 'p-3', 'border', 'rounded', 'text-gray-700');
                btn.innerText = opt;
                
                // é»æ“Šäº‹ä»¶
                btn.onclick = function() {
                    // é–å®šè©²é¡Œä¸å¯å†é¸
                    if (optionsDiv.getAttribute('data-answered') === 'true') return;
                    optionsDiv.setAttribute('data-answered', 'true');

                    if (optIndex === q.answer) {
                        btn.classList.add('correct');
                        btn.innerHTML += ' <span class="float-right font-bold">âœ“ æ­£ç¢º</span>';
                    } else {
                        btn.classList.add('wrong');
                        btn.innerHTML += ' <span class="float-right font-bold">âœ— éŒ¯èª¤</span>';
                        // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
                        optionsDiv.children[q.answer].classList.add('correct');
                        optionsDiv.children[q.answer].innerHTML += ' <span class="float-right font-bold">âœ“ é€™æ˜¯æ­£è§£</span>';
                    }

                    // é¡¯ç¤ºè§£æ
                    const explanation = document.createElement('div');
                    explanation.classList.add('mt-3', 'p-3', 'bg-blue-50', 'text-blue-800', 'rounded', 'text-sm');
                    explanation.innerText = q.explanation;
                    questionDiv.appendChild(explanation);
                };

                optionsDiv.appendChild(btn);
            });

            questionDiv.appendChild(optionsDiv);
            quizContainer.appendChild(questionDiv);
        });
    </script>
</body>
</html>