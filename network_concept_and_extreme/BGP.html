<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGP å”å®šæ¶æ§‹èˆ‡é‹ä½œåŸç† - Extreme XOS ç¶²è·¯æ¶æ§‹å¤§å¸«</title>
    <!-- å¼•å…¥ Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #f0f4f8;
            --accent-color: #e63946;
            --text-color: #333;
            --border-radius: 8px;
            --code-bg: #282c34;
            --code-text: #abb2bf;
            --code-comment: #98c379;
            --code-command: #61afef;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(135deg, #0056b3 0%, #002a5c 100%);
            color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 { margin: 0; font-size: 2.2rem; }
        h2 { border-left: 5px solid var(--primary-color); padding-left: 15px; margin-top: 40px; color: #2c3e50; }
        h3 { color: var(--primary-color); margin-top: 25px; }

        .section-box {
            background-color: var(--secondary-color);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            border: 1px solid #e1e4e8;
        }

        .highlight-box {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .analogy-icon { font-size: 1.5rem; margin-right: 10px; }
        
        .diagram-container {
            display: flex;
            flex-direction: column; /* å‚ç›´æ’åˆ— */
            align-items: center;
            gap: 30px;
            margin: 20px 0;
        }

        .diagram-box {
            width: 100%;
            background: white;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .diagram-title {
            font-weight: bold;
            color: #555;
            margin-bottom: 10px;
            display: block;
        }

        /* Code Block Styles */
        .code-box {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 15px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            overflow-x: auto;
            border-left: 5px solid #d19a66;
        }
        .code-box pre { margin: 0; }
        .code-title {
            color: #d19a66;
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
        }
        .cmd { color: var(--code-command); }
        .cmt { color: var(--code-comment); font-style: italic; }

        /* Quiz Styles */
        .quiz-container { margin-top: 20px; }
        .question-block {
            background: #fff;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
        }
        .options label {
            display: block;
            margin: 10px 0;
            cursor: pointer;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .options label:hover { background: #e9ecef; }
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            display: none;
        }
        .correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .btn-check {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        .btn-check:hover { background-color: #004494; }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            background: white;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
            color: #333;
        }

        /* Footer */
        footer {
            margin-top: auto;
            padding-top: 40px;
            padding-bottom: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            border-top: 1px solid #eee;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Extreme XOS ç¶²è·¯æ¶æ§‹å¤§å¸«</h1>
        <p>æ·±å…¥æ·ºå‡º BGPï¼šå¾ iBGP/eBGP åˆ° Route Reflector</p>
    </header>

    <!-- ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ -->
    <section>
        <h2>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ (Concept)</h2>
        <div class="section-box">
            <h3><span class="analogy-icon">ğŸ’¡</span>ä¸€å¥è©±å®šç¾©</h3>
            <p>BGP (Border Gateway Protocol) æ˜¯ç¶²éš›ç¶²è·¯çš„ã€Œæ¨™æº–èªè¨€ã€ï¼Œå±¬æ–¼ <strong>EGP (å¤–éƒ¨é–˜é“å”å®š)</strong>ï¼Œç”¨æ–¼åœ¨ä¸åŒçš„è‡ªæ²»ç³»çµ± (AS) ä¹‹é–“äº¤æ›è·¯ç”±è³‡è¨Šï¼Œæ±ºå®šæ•¸æ“šå‚³è¼¸çš„æœ€ä½³è·¯å¾‘ã€‚</p>
            
            <div class="highlight-box">
                <h4>ğŸŒ åŸºç¤åˆ†é¡ï¼šIGP èˆ‡ EGP çš„å·®ç•°</h4>
                <p>ç¶²è·¯å”å®šä¾æ“šã€Œé‹ä½œç¯„åœã€åˆ†ç‚ºå…©å¤§é¡ï¼š</p>
                <div class="mermaid">
                    graph TB
                        subgraph Global_Internet ["ç¶²éš›ç¶²è·¯ (EGP Domain)"]
                            direction LR
                            AS1[("AS 100<br>(ä¼æ¥­)")]
                            AS2[("AS 200<br>(ISP A)")]
                            AS3[("AS 300<br>(ISP B)")]
                            
                            AS1 == "BGP (EGP)" ==> AS2
                            AS2 == "BGP (EGP)" ==> AS3
                            AS1 == "BGP (EGP)" ==> AS3
                        end

                        subgraph Inside_AS1 ["AS 100 å…§éƒ¨ (IGP Domain)"]
                            R1((Router A)) --- R2((Router B))
                            R2 --- R3((Router C))
                            R1 --- R3
                            linkStyle 3,4,5 stroke:blue,stroke-width:2px;
                        end
                        
                        %% Add invisible link to position graphs
                        AS1 ~~~ Inside_AS1
                </div>
                <br>
                <table>
                    <thead>
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>IGP (å…§éƒ¨é–˜é“å”å®š)</th>
                            <th>EGP (å¤–éƒ¨é–˜é“å”å®š)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>å…¨å</strong></td>
                            <td>Interior Gateway Protocol</td>
                            <td>Exterior Gateway Protocol</td>
                        </tr>
                        <tr>
                            <td><strong>é‹ä½œç¯„åœ</strong></td>
                            <td>å–®ä¸€ AS <strong>å…§éƒ¨</strong></td>
                            <td>ä¸åŒ AS <strong>ä¹‹é–“</strong></td>
                        </tr>
                        <tr>
                            <td><strong>ä¸»è¦ç›®æ¨™</strong></td>
                            <td><strong>é€Ÿåº¦</strong>ï¼šå¿«é€Ÿæ”¶æ–‚ï¼Œæ‰¾æœ€çŸ­è·¯å¾‘ã€‚</td>
                            <td><strong>æ§åˆ¶</strong>ï¼šæ”¿ç­–è·¯ç”± (Policy)ï¼Œé¸æœ€ã€Œå¥½ã€çš„è·¯å¾‘ã€‚</td>
                        </tr>
                        <tr>
                            <td><strong>å¸¸è¦‹å”å®š</strong></td>
                            <td>OSPF, RIP, IS-IS, EIGRP</td>
                            <td><strong>BGP</strong> (ç›®å‰å”¯ä¸€)</td>
                        </tr>
                        <tr>
                            <td><strong>ç”Ÿæ´»æ¯”å–»</strong></td>
                            <td><strong>åœ‹å…§å°èˆª</strong>ï¼šå¾å°åŒ—é–‹è»Šåˆ°é«˜é›„ï¼Œè¦åœ¨æ„è·¯æ³ã€è·é›¢ã€ç´…ç¶ ç‡ˆ (åœ¨æ„é€Ÿåº¦)ã€‚</td>
                            <td><strong>åœ‹éš›èˆªç­</strong>ï¼šå¾å°ç£é£›å¾€ç¾åœ‹ï¼Œè¦è€ƒæ…®ç°½è­‰ã€èˆªæ¬Šã€æ”¿æ²»å› ç´  (åœ¨æ„æ”¿ç­–èˆ‡å¯é”æ€§)ã€‚</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3><span class="analogy-icon">ğŸ</span>BGP ç”Ÿæ´»åŒ–æ¯”å–»</h3>
            <p><strong>BGP å°±åƒæ˜¯åœ‹éš›å¤–äº¤å®˜èˆ‡åœ‹å…§éƒµå·®çš„çµåˆï¼š</strong></p>
            <ul>
                <li><strong>AS (è‡ªæ²»ç³»çµ±)ï¼š</strong> æƒ³åƒæˆä¸€å€‹ã€Œåœ‹å®¶ã€æˆ–ã€Œå¤§å‹è·¨åœ‹ä¼æ¥­ã€ã€‚</li>
                <li><strong>eBGP (External BGP)ï¼š</strong> åƒæ˜¯ã€Œå¤–äº¤å®˜ã€ã€‚è² è²¬åœ‹èˆ‡åœ‹ä¹‹é–“ï¼ˆä¸åŒ ISP æˆ–ä¼æ¥­é–“ï¼‰äº¤æ›åœ°åœ–è³‡è¨Šã€‚ã€Œå˜¿ï¼Œè¦å» Google åœ‹ï¼Œè«‹èµ°é€™æ¢è·¯ã€ã€‚</li>
                <li><strong>iBGP (Internal BGP)ï¼š</strong> åƒæ˜¯ã€Œåœ‹å…§éƒµå·®ã€ã€‚ç•¶å¤–äº¤å®˜æ‹¿åˆ°åœ‹å¤–çš„åœ°åœ–å¾Œï¼Œå¿…é ˆé€éåœ‹å…§éƒµå·®å‘Šè¨´åœ‹å…§çš„æ‰€æœ‰éƒµå±€ï¼ˆè·¯ç”±å™¨ï¼‰ï¼Œè®“å¤§å®¶çŸ¥é“æ€éº¼æŠŠä¿¡å¯„å‡ºåœ‹ã€‚</li>
            </ul>

            <div class="highlight-box">
                <h4>ğŸ”‘ é—œéµçŸ¥è­˜ï¼šå…¬æœ‰ vs ç§æœ‰ AS Number</h4>
                <p>å°±åƒ IP ä½å€æœ‰åˆ† Public (å…¬ç¶²) èˆ‡ Private (å…§ç¶²) ä¸€æ¨£ï¼ŒAS Number ä¹Ÿæœ‰å€åˆ†ã€‚ç§æœ‰ AS åƒ…èƒ½åœ¨ä¼æ¥­å…§éƒ¨æˆ–èˆ‡ ISP ç´„å®šä½¿ç”¨ï¼Œ<strong>ä¸å¯åœ¨ç¶²éš›ç¶²è·¯ä¸Šå»£æ’­</strong>ã€‚</p>
                <table>
                    <thead>
                        <tr>
                            <th>é¡å‹</th>
                            <th>2-Byte Range (å‚³çµ±)</th>
                            <th>4-Byte Range (æ–°å¼)</th>
                            <th>ç”¨é€”é¡ä¼¼æ–¼</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Public AS (å…¬æœ‰)</strong></td>
                            <td>1 - 64511</td>
                            <td>1 - 4199999999</td>
                            <td>å…¨çƒå”¯ä¸€çš„é›»è©±è™Ÿç¢¼ (+886...)</td>
                        </tr>
                        <tr>
                            <td><strong>Private AS (ç§æœ‰)</strong></td>
                            <td><strong>64512 - 65534</strong></td>
                            <td><strong>4200000000 - 4294967294</strong></td>
                            <td>å…¬å¸å…§éƒ¨åˆ†æ©Ÿ (Ext. 1234)</td>
                        </tr>
                    </tbody>
                </table>
                <p style="font-size: 0.9em; color: #666; margin-top: 5px;">* è¨»ï¼šAS 0, 23456, 65535 ç­‰ç‚ºä¿ç•™ç”¨é€”ã€‚</p>
            </div>
        </div>
    </section>

    <!-- äºŒã€é‹ä½œåŸç† -->
    <section>
        <h2>äºŒã€é‹ä½œåŸç† (Mechanism)</h2>
        <div class="section-box">
            <h3>æŠ€è¡“ç´°ç¯€</h3>
            <p>BGP æ˜¯ä¸€ç¨® <strong>è·¯å¾‘å‘é‡ (Path Vector)</strong> å”å®šï¼Œå®ƒä¸åªçœ‹è·é›¢ï¼Œæ›´çœ‹ã€Œè·¯å¾‘å±¬æ€§ã€(Attributes)ã€‚</p>
            <ul>
                <li><strong>é€£ç·šå»ºç«‹ï¼š</strong> ä½¿ç”¨ <strong>TCP Port 179</strong> å»ºç«‹å¯é é€£ç·šã€‚</li>
                <li><strong>eBGP è¡Œç‚ºï¼š</strong> é è¨­ TTL ç‚º 1 (ç›´æ¥ç›¸é€£)ã€‚ç•¶è·¯ç”±å‚³çµ¦é„°å±… AS æ™‚ï¼Œæœƒå°‡è‡ªå·±çš„ AS è™Ÿç¢¼åŠ å…¥ `AS_PATH`ï¼Œä¸¦å°‡ `Next-Hop` æ”¹ç‚ºè‡ªå·±ã€‚</li>
                <li><strong>iBGP è¡Œç‚ºï¼š</strong> ç‚ºäº†é˜²æ­¢è·¯ç”±è¿´åœˆï¼ŒiBGP éµå®ˆ <strong>Split Horizon (æ°´å¹³åˆ†å‰²)</strong> è¦å‰‡ï¼šå¾ä¸€å€‹ iBGP é„°å±…å­¸åˆ°çš„è·¯ç”±ï¼Œ<strong>ä¸æœƒ</strong>å†å‚³çµ¦å¦ä¸€å€‹ iBGP é„°å±…ã€‚
                    <br><em>é€™å°è‡´äº†æ“´å±•æ€§å•é¡Œï¼š</em> å¿…é ˆæ‰€æœ‰è·¯ç”±å™¨äº’é€£ (Full Mesh)ï¼Œæˆ–ä½¿ç”¨ Route Reflector (RR) ä¾†æ‰“ç ´æ­¤è¦å‰‡ã€‚</li>
                <li><strong>MBGP (Multiprotocol BGP)ï¼š</strong> æ¨™æº– BGP åªèƒ½å‚³ IPv4ã€‚MBGP æ“´å……äº†èƒ½åŠ›ï¼Œå¯ä»¥åœ¨åŒä¸€å€‹ BGP session ä¸­å‚³é IPv6ã€MPLS VPN labelã€Multicast ç­‰å¤šç¨®ã€Œä½å€æ—ç¾¤ (Address Families)ã€ã€‚</li>
            </ul>
        </div>
    </section>

    <!-- ä¸‰ã€æ¶æ§‹è¦–è¦ºåŒ– -->
    <section>
        <h2>ä¸‰ã€æ¶æ§‹è¦–è¦ºåŒ– (Visuals)</h2>
        <p>ä»¥ä¸‹å±•ç¤º BGP çš„ä¸‰ç¨®é—œéµæ¶æ§‹å ´æ™¯ï¼šåŸºç¤å°æ¥ã€Full Mesh çš„å›°å¢ƒã€ä»¥åŠ Route Reflector çš„è§£æ±ºæ–¹æ¡ˆã€‚</p>

        <div class="diagram-container">
            
            <!-- åœ–ä¸€ï¼šeBGP vs iBGP -->
            <div class="diagram-box">
                <span class="diagram-title">åœ– 1ï¼šeBGP èˆ‡ iBGP çš„åŸºæœ¬é—œä¿‚</span>
                <div class="mermaid">
                    graph LR
                        subgraph AS_100 ["AS 100 (ä¼æ¥­ç¸½éƒ¨)"]
                            R1(("R1<br>Edge")) --- R2(("R2<br>Core"))
                            R2 --- R3(("R3<br>Core"))
                            R1 -. "iBGP Session" .- R2
                            R2 -. "iBGP Session" .- R3
                            style R1 fill:#d4edda,stroke:#155724
                            style R2 fill:#d4edda,stroke:#155724
                            style R3 fill:#d4edda,stroke:#155724
                        end

                        subgraph AS_200 ["AS 200 (ISP æœå‹™å•†)"]
                            ISP1(("ISP Router"))
                            style ISP1 fill:#cce5ff,stroke:#004085
                        end

                        R1 == "eBGP Session <br> (TTL=1)" ==> ISP1
                        
                        linkStyle 4 stroke-width:4px,fill:none,stroke:red;
                </div>
                <p style="font-size:0.9em; color:#666;">èªªæ˜ï¼šè·¨è¶Š AS é‚Šç•Œä½¿ç”¨ eBGPï¼ŒAS å…§éƒ¨å‚³éå¤–éƒ¨è·¯ç”±ä½¿ç”¨ iBGPã€‚</p>
            </div>

            <!-- åœ–äºŒï¼šFull Mesh å•é¡Œ -->
            <div class="diagram-box">
                <span class="diagram-title">åœ– 2ï¼šiBGP Full Mesh (æ²’æœ‰ RR çš„æ··äº‚ä¸–ç•Œ)</span>
                <div class="mermaid">
                    graph TD
                        subgraph AS_300 ["AS 300 - iBGP Full Mesh"]
                            A(("R_A")) --- B(("R_B"))
                            A --- C(("R_C"))
                            A --- D(("R_D"))
                            B --- C
                            B --- D
                            C --- D
                            style A fill:#fff3cd,stroke:#856404
                            style B fill:#fff3cd,stroke:#856404
                            style C fill:#fff3cd,stroke:#856404
                            style D fill:#fff3cd,stroke:#856404
                        end
                </div>
                <p style="font-size:0.9em; color:#666;">èªªæ˜ï¼šæ ¹æ“š iBGP Split Horizon è¦å‰‡ï¼Œè‹¥ç„¡ RRï¼Œæ‰€æœ‰è·¯ç”±å™¨å¿…é ˆå…©å…©äº’é€£ (N*(N-1)/2)ï¼Œç®¡ç†æ¥µå…¶å›°é›£ã€‚</p>
            </div>

            <!-- åœ–ä¸‰ï¼šRoute Reflector -->
            <div class="diagram-box">
                <span class="diagram-title">åœ– 3ï¼šRoute Reflector (RR) æ¶æ§‹å„ªåŒ–</span>
                <div class="mermaid">
                    graph TD
                        subgraph AS_300_Optimized ["AS 300 - ä½¿ç”¨ Route Reflector"]
                            RR(("RR Server<br>Route Reflector"))
                            Client1(("Client 1"))
                            Client2(("Client 2"))
                            Client3(("Client 3"))
                            
                            RR -. "åå°„è·¯ç”±" .- Client1
                            RR -. "åå°„è·¯ç”±" .- Client2
                            RR -. "åå°„è·¯ç”±" .- Client3
                            
                            Client1 --- RR
                            Client2 --- RR
                            Client3 --- RR

                            style RR fill:#f8d7da,stroke:#721c24,stroke-width:4px
                            style Client1 fill:#d4edda,stroke:#155724
                            style Client2 fill:#d4edda,stroke:#155724
                            style Client3 fill:#d4edda,stroke:#155724
                        end
                </div>
                <p style="font-size:0.9em; color:#666;">èªªæ˜ï¼šæ‰€æœ‰ Client åªéœ€èˆ‡ RR å»ºç«‹é„°å±…é—œä¿‚ã€‚RR æ‰“ç ´ Split Horizon è¦å‰‡ï¼Œå°‡è·¯ç”±ã€Œåå°„ã€çµ¦å…¶ä»– Clientï¼Œå¤§å¹…ç°¡åŒ–æ¶æ§‹ã€‚</p>
            </div>

        </div>
    </section>

    <!-- å››ã€å¯¦å‹™æ‡‰ç”¨å ´æ™¯ -->
    <section>
        <h2>å››ã€å¯¦å‹™æ‡‰ç”¨å ´æ™¯ (Use Case)</h2>
        
        <!-- å ´æ™¯ä¸€ï¼šeBGP -->
        <div class="section-box">
            <h3>å ´æ™¯ä¸€ï¼šä¼æ¥­ç”³è«‹è‡ªå¸¶ IP (BYOIP) å°æ¥ ISP (eBGP)</h3>
            <p><strong>æƒ…å¢ƒï¼š</strong> ã€Œå¿«æ¨‚ç§‘æŠ€å…¬å¸ã€æ˜¯ä¸€å®¶ä¸­å‹ä¼æ¥­ï¼Œå› ç‚ºæ¥­å‹™æ“´å¼µï¼Œæ±ºå®šå‘ TWNIC ç”³è«‹è‡ªå·±çš„ç¶²æ®µ (203.0.113.0/24) å’Œ AS è™Ÿç¢¼ (AS 65001)ï¼Œä¸¦èˆ‡ ISP (AS 3462) å»ºç«‹é€£ç·šã€‚</p>
            
            <div class="mermaid">
                graph LR
                    subgraph Customer ["å¿«æ¨‚ç§‘æŠ€ (AS 65001)"]
                        CE(("ä¼æ¥­è·¯ç”±å™¨<br>Edge Router<br>192.0.2.2"))
                    end
                    subgraph ISP ["ISP æœå‹™å•† (AS 3462)"]
                        PE(("ISP è·¯ç”±å™¨<br>PE Router<br>192.0.2.1"))
                    end
                    
                    CE == "eBGP Session" ==> PE
                    
                    CE -- "å»£å‘Š: 203.0.113.0/24" --> PE
                    PE -- "æ¥æ”¶: Default Route (0.0.0.0/0)" --> CE
                    
                    style CE fill:#d4edda,stroke:#155724
                    style PE fill:#cce5ff,stroke:#004085
            </div>
            
            <br>
            <ul>
                <li><strong>è¨­å®šé‡é»ï¼š</strong> å»ºç«‹ eBGP Neighbor ä¸¦å®£å‘Š (Network) è‡ªå·±çš„ç¶²æ®µã€‚</li>
                <li><strong>AS é¸æ“‡ï¼š</strong> æœ¬æ¡ˆä¾‹ AS 65001 å±¬æ–¼ <strong>ç§æœ‰ AS</strong> ç¯„åœï¼Œé€šå¸¸è‹¥æ˜¯çœŸå¯¦å°å¤–æœå‹™ï¼Œéœ€ç”³è«‹ Public ASã€‚è‹¥åƒ…å°å–®ä¸€ ISP æˆ–å¯¦é©—æ€§è³ªï¼Œå‰‡ä½¿ç”¨ Private ASã€‚</li>
            </ul>

            <!-- CLI ç¯„ä¾‹å€å¡Š - eBGP -->
            <div class="code-box">
                <span class="code-title">ğŸ’» ExtremeXOS eBGP è¨­å®šç¯„ä¾‹</span>
                <pre>
<span class="cmt"># 1. åŸºç¤ä»‹é¢è¨­å®š (å‡è¨­ Port 1 æ¥ ISP)</span>
<span class="cmd">create vlan isp_link</span>
<span class="cmd">configure vlan isp_link tag 100</span>
<span class="cmd">configure vlan isp_link add port 1</span>
<span class="cmd">configure vlan isp_link ipaddress 192.0.2.2/30</span>
<span class="cmd">enable ipforwarding vlan isp_link</span>

<span class="cmt"># 2. å•Ÿå‹• BGP ä¸¦è¨­å®šæœ¬åœ° AS (65001 - Private AS Example)</span>
<span class="cmd">enable bgp</span>
<span class="cmd">configure bgp as-number 65001</span>
<span class="cmd">configure bgp routerid 192.0.2.2</span>

<span class="cmt"># 3. å»ºç«‹ eBGP é„°å±…é—œä¿‚ (ISP AS 3462)</span>
<span class="cmd">create bgp neighbor 192.0.2.1 remote-AS 3462</span>
<span class="cmd">enable bgp neighbor 192.0.2.1</span>

<span class="cmt"># 4. å®£å‘Šè‡ªå·±çš„ç¶²æ®µ (éœ€å…ˆæœ‰è·¯ç”±å­˜åœ¨)</span>
<span class="cmd">configure bgp add network 203.0.113.0/24</span>
                </pre>
            </div>
        </div>

        <!-- å ´æ™¯äºŒï¼šiBGP + RR -->
        <div class="section-box">
            <h3>å ´æ™¯äºŒï¼šiBGP å…§éƒ¨æ ¸å¿ƒè·¯ç”±å„ªåŒ– (Route Reflector)</h3>
            <p><strong>æƒ…å¢ƒï¼š</strong> ä¼æ¥­å…§éƒ¨æœ‰å¤šå€‹æ ¸å¿ƒç¯€é»éœ€è¦äº¤æ› BGP è·¯ç”±ã€‚ç‚ºäº†é¿å…æ¯å°è¨­å‚™éƒ½è¦äº’è¯ (Full Mesh) é€ æˆç®¡ç†ç½é›£ï¼Œæ±ºå®šå°‡ HQ æ ¸å¿ƒäº¤æ›å™¨è¨­ç‚º <strong>Route Reflector (RR)</strong>ï¼Œåˆ†å…¬å¸è¨­å‚™è¨­ç‚º <strong>Client</strong>ã€‚</p>
            <ul>
                <li><strong>AS Numberï¼š</strong> å…¨ç¶²çš†ç‚º AS 65000 (å±¬æ–¼ Private AS ç¯„åœ)ã€‚</li>
                <li><strong>è§’è‰²åˆ†é…ï¼š</strong>
                    <ul>
                        <li><strong>HQ Core (RR)ï¼š</strong> è² è²¬åå°„è·¯ç”±ã€‚IP: 10.0.0.1</li>
                        <li><strong>Branch A (Client)ï¼š</strong> æ¥æ”¶ä¸¦å‚³é€è·¯ç”±çµ¦ HQã€‚IP: 10.0.0.2</li>
                        <li><strong>Branch B (Client)ï¼š</strong> æ¥æ”¶ä¸¦å‚³é€è·¯ç”±çµ¦ HQã€‚IP: 10.0.0.3</li>
                    </ul>
                </li>
            </ul>

            <div class="mermaid">
                graph TD
                    subgraph AS_65000 ["AS 65000 (Private AS)"]
                        HQ(("HQ Core<br>(RR Server)<br>10.0.0.1"))
                        BR_A(("Branch A<br>(Client)<br>10.0.0.2"))
                        BR_B(("Branch B<br>(Client)<br>10.0.0.3"))
                        
                        HQ -. "Reflects Routes" .- BR_A
                        HQ -. "Reflects Routes" .- BR_B
                        
                        BR_A -- "iBGP Session" --- HQ
                        BR_B -- "iBGP Session" --- HQ
                        
                        style HQ fill:#f8d7da,stroke:#721c24,stroke-width:4px
                        style BR_A fill:#d4edda,stroke:#155724
                        style BR_B fill:#d4edda,stroke:#155724
                    end
            </div>
            <br>

            <!-- CLI ç¯„ä¾‹å€å¡Š - iBGP RR -->
            <div class="code-box">
                <span class="code-title">ğŸ’» ExtremeXOS RR & Client è¨­å®šç¯„ä¾‹</span>
                <pre>
<span class="cmt"># --- è¨­å®š HQ Core (RR Server) ---</span>
<span class="cmd">enable bgp</span>
<span class="cmd">configure bgp as-number 65000</span>
<span class="cmd">configure bgp routerid 10.0.0.1</span>

<span class="cmt"># å»ºç«‹ iBGP Neighbor (æŒ‡å‘ Branch A)</span>
<span class="cmd">create bgp neighbor 10.0.0.2 remote-AS 65000</span>
<span class="cmd">enable bgp neighbor 10.0.0.2</span>
<span class="cmt"># é—œéµæŒ‡ä»¤ï¼šå°‡æ­¤é„°å±…è¨­ç‚º Clientï¼Œå•Ÿç”¨åå°„åŠŸèƒ½</span>
<span class="cmd">configure bgp neighbor 10.0.0.2 route-reflector-client</span>

<span class="cmt"># å»ºç«‹ iBGP Neighbor (æŒ‡å‘ Branch B)</span>
<span class="cmd">create bgp neighbor 10.0.0.3 remote-AS 65000</span>
<span class="cmd">enable bgp neighbor 10.0.0.3</span>
<span class="cmd">configure bgp neighbor 10.0.0.3 route-reflector-client</span>


<span class="cmt"># --- è¨­å®š Branch A (RR Client) ---</span>
<span class="cmt"># Client ç«¯ä¸éœ€è¦çŸ¥é“èª°æ˜¯ RRï¼Œåªéœ€ç•¶ä½œä¸€èˆ¬ iBGP è¨­å®šå³å¯</span>
<span class="cmd">enable bgp</span>
<span class="cmd">configure bgp as-number 65000</span>
<span class="cmd">configure bgp routerid 10.0.0.2</span>

<span class="cmt"># å»ºç«‹æŒ‡å‘ HQ çš„é€£ç·š</span>
<span class="cmd">create bgp neighbor 10.0.0.1 remote-AS 65000</span>
<span class="cmd">enable bgp neighbor 10.0.0.1</span>
<span class="cmt"># æ³¨æ„ï¼šClient ç«¯ä¸éœ€è¦è¨­å®š route-reflector-client æŒ‡ä»¤</span>
                </pre>
            </div>
        </div>

    </section>

    <!-- äº”ã€éš¨å ‚æ¸¬é©— -->
    <section>
        <h2>äº”ã€éš¨å ‚æ¸¬é©— (Quiz)</h2>
        <div class="quiz-container">
            
            <!-- Question 1 -->
            <div class="question-block" id="q1">
                <h4>1. ä¸‹åˆ—å“ªä¸€å€‹å”å®šå±¬æ–¼ EGP (å¤–éƒ¨é–˜é“å”å®š)ï¼Ÿ</h4>
                <div class="options">
                    <label><input type="radio" name="q1" value="wrong"> OSPF</label>
                    <label><input type="radio" name="q1" value="wrong"> RIP</label>
                    <label><input type="radio" name="q1" value="correct"> BGP</label>
                    <label><input type="radio" name="q1" value="wrong"> EIGRP</label>
                </div>
                <button class="btn-check" onclick="checkAnswer('q1')">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div class="feedback"></div>
            </div>

            <!-- Question 2 -->
            <div class="question-block" id="q2">
                <h4>2. ç‚ºä»€éº¼åœ¨æ¨™æº– iBGP æ¶æ§‹ä¸­(ç„¡ RR) éœ€è¦ Full Mesh é€£ç·šï¼Ÿ</h4>
                <div class="options">
                    <label><input type="radio" name="q2" value="wrong"> ç‚ºäº†å¢åŠ é »å¯¬</label>
                    <label><input type="radio" name="q2" value="correct"> å› ç‚º iBGP çš„ Split Horizon è¦å‰‡é˜²æ­¢å¾ iBGP å­¸åˆ°çš„è·¯ç”±å‚³çµ¦å¦ä¸€å€‹ iBGP é„°å±…</label>
                    <label><input type="radio" name="q2" value="wrong"> å› ç‚º eBGP ç„¡æ³•å‚³éå…§éƒ¨è·¯ç”±</label>
                    <label><input type="radio" name="q2" value="wrong"> ç‚ºäº†åŠ å¯†å®‰å…¨æ€§</label>
                </div>
                <button class="btn-check" onclick="checkAnswer('q2')">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div class="feedback"></div>
            </div>

            <!-- Question 3 -->
            <div class="question-block" id="q3">
                <h4>3. Route Reflector (RR) çš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€éº¼ï¼Ÿ</h4>
                <div class="options">
                    <label><input type="radio" name="q3" value="wrong"> åŠ é€Ÿå°åŒ…è½‰é€</label>
                    <label><input type="radio" name="q3" value="wrong"> æ”¹è®Šå°åŒ…çš„ä¾†æº IP</label>
                    <label><input type="radio" name="q3" value="correct"> è§£æ±º iBGP Full Mesh æ“´å……æ€§å•é¡Œï¼Œå…è¨±è·¯ç”±åå°„</label>
                    <label><input type="radio" name="q3" value="wrong"> å°‡ BGP è½‰æ›ç‚º OSPF</label>
                </div>
                <button class="btn-check" onclick="checkAnswer('q3')">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div class="feedback"></div>
            </div>

            <!-- Question 4 -->
            <div class="question-block" id="q4">
                <h4>4. é—œæ–¼ AS Number (è‡ªæ²»ç³»çµ±è™Ÿç¢¼)ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ</h4>
                <div class="options">
                    <label><input type="radio" name="q4" value="correct"> Private AS (2-Byte) çš„ç¯„åœæ˜¯ 64512 - 65534ï¼Œä¸å¯åœ¨ç¶²éš›ç¶²è·¯ä¸Šè·¯ç”±ã€‚</label>
                    <label><input type="radio" name="q4" value="wrong"> æ‰€æœ‰ AS Number éƒ½å¯ä»¥è‡ªç”±åœ¨ç¶²éš›ç¶²è·¯ä¸Šä½¿ç”¨ã€‚</label>
                    <label><input type="radio" name="q4" value="wrong"> Private AS åªèƒ½ä½¿ç”¨ 4-Byte æ ¼å¼ã€‚</label>
                    <label><input type="radio" name="q4" value="wrong"> AS 65000 æ˜¯ Public ASã€‚</label>
                </div>
                <button class="btn-check" onclick="checkAnswer('q4')">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div class="feedback"></div>
            </div>

            <!-- Question 5 -->
            <div class="question-block" id="q5">
                <h4>5. IGP (å¦‚ OSPF) èˆ‡ EGP (å¦‚ BGP) çš„ä¸»è¦ç›®æ¨™å·®ç•°ç‚ºä½•ï¼Ÿ</h4>
                <div class="options">
                    <label><input type="radio" name="q5" value="wrong"> IGP ç‚ºäº†é€£ç·šå®‰å…¨ï¼ŒEGP ç‚ºäº†é€Ÿåº¦</label>
                    <label><input type="radio" name="q5" value="correct"> IGP è¿½æ±‚å¿«é€Ÿæ”¶æ–‚èˆ‡æœ€çŸ­è·¯å¾‘ï¼›EGP è‘—é‡æ–¼æ”¿ç­–æ§åˆ¶ (Policy) èˆ‡ AS é–“çš„äº’é€š</label>
                    <label><input type="radio" name="q5" value="wrong"> IGP åªèƒ½ç”¨åœ¨ IPv4ï¼ŒEGP åªèƒ½ç”¨åœ¨ IPv6</label>
                    <label><input type="radio" name="q5" value="wrong"> å…©è€…ç›®æ¨™å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å» å•†ä¸åŒ</label>
                </div>
                <button class="btn-check" onclick="checkAnswer('q5')">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div class="feedback"></div>
            </div>

        </div>
    </section>

    <footer>
        Planning & Design by Timmy(timmyc@hauman.com.tw) | è±ªå‹‰ç§‘æŠ€ Hauman Technologies Corporation | Ver 1.0
    </footer>
</div>

<script>
    function checkAnswer(questionId) {
        const block = document.getElementById(questionId);
        const selected = block.querySelector('input[name="' + questionId + '"]:checked');
        const feedback = block.querySelector('.feedback');

        if (!selected) {
            alert("è«‹å…ˆé¸æ“‡ä¸€å€‹ç­”æ¡ˆï¼");
            return;
        }

        feedback.style.display = "block";
        feedback.className = "feedback"; // reset classes

        if (selected.value === "correct") {
            feedback.classList.add("correct");
            feedback.innerHTML = "<strong>ç­”å°äº†ï¼</strong> è§£æï¼šæ‚¨çš„è§€å¿µéå¸¸æ­£ç¢ºã€‚";
        } else {
            feedback.classList.add("incorrect");
            let explanation = "";
            switch(questionId) {
                case 'q1': explanation = "ç›®å‰ç¶²éš›ç¶²è·¯ä¸Šå”¯ä¸€çš„ EGP å°±æ˜¯ BGPã€‚OSPF, RIP, EIGRP çš†ç‚º AS å…§éƒ¨ä½¿ç”¨çš„ IGPã€‚"; break;
                case 'q2': explanation = "iBGP çš„ Split Horizon æ©Ÿåˆ¶è¦å®šï¼šå¾ iBGP é„°å±…å­¸åˆ°çš„è·¯ç”±ä¸èƒ½å‚³çµ¦å…¶ä»– iBGP é„°å±…ï¼Œç›®çš„æ˜¯é˜²æ­¢è¿´åœˆï¼Œä½†ä¹Ÿå› æ­¤å°è‡´éœ€è¦ Full Meshã€‚"; break;
                case 'q3': explanation = "RR çš„è¨­è¨ˆç›®çš„å°±æ˜¯ç‚ºäº†æ‰“ç ´ Split Horizon è¦å‰‡ï¼Œé€éä¸­å¿ƒåŒ–çš„åå°„æ©Ÿåˆ¶ï¼Œæ¸›å°‘å¤§é‡ Full Mesh çš„ Session éœ€æ±‚ã€‚"; break;
                case 'q4': explanation = "Private AS (64512-65534) å°±åƒ Private IPï¼Œåªèƒ½åœ¨çµ„ç¹”å…§éƒ¨ä½¿ç”¨ï¼Œä¸èƒ½åœ¨ç¶²éš›ç¶²è·¯ä¸Šå‡ºç¾ã€‚AS 65000 å±¬æ–¼æ­¤ç¯„åœã€‚"; break;
                case 'q5': explanation = "IGP åƒæ˜¯åœ‹å…§å°èˆªï¼Œæœ€å¿«åˆ°é”å°±å¥½ï¼›EGP åƒæ˜¯åœ‹éš›å¤–äº¤ï¼Œéœ€è¦è€ƒæ…®æ”¿æ²»èˆ‡å•†æ¥­æ”¿ç­– (Policy) è€Œéå–®ç´”çœ‹é€Ÿåº¦ã€‚"; break;
            }
            feedback.innerHTML = "<strong>ç­”éŒ¯äº†ã€‚</strong> è§£æï¼š" + explanation;
        }
    }
</script>

</body>
</html>