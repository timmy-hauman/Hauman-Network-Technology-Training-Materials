<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A10 Networks Thunder 實戰課程 | 基礎架構篇</title>
    <!-- Google Fonts: Rubik -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Mermaid JS -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        a10blue: '#002F6C',       /* Midnight Blue */
                        a10light: '#F3F4F6',      /* Light Grey */
                        a10accent: '#E6007E',     /* Magenta */
                        a10orange: '#FF6600',     /* A10 Orange */
                        a10congress: '#00529B',   /* Congress Blue */
                    },
                    fontFamily: {
                        sans: ['Rubik', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Rubik', sans-serif;
            background-color: #F8F9FA;
            color: #333;
        }
        .gradient-header {
            background: linear-gradient(135deg, #002F6C 0%, #00529B 100%);
        }
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .mermaid {
            display: flex;
            justify-content: center;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            overflow-x: auto; /* Allow scrolling if graph is too wide */
        }
        /* Quiz Styles */
        .option-btn {
            transition: all 0.2s;
        }
        .option-btn:hover {
            background-color: #EEF2FF;
            border-color: #00529B;
        }
        .selected {
            background-color: #002F6C !important;
            color: white !important;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="gradient-header text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa-solid fa-network-wired text-2xl text-a10orange"></i>
                <div>
                    <h1 class="text-xl font-bold tracking-wide">A10 Networks Thunder 實戰課程</h1>
                    <p class="text-xs text-gray-300">Level 1 - 基礎架構與 SLB 原理</p>
                </div>
            </div>
            <div class="hidden md:block">
                <span class="bg-a10accent text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">A10 Thunder Architect</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 space-y-12 max-w-5xl">

        <!-- Intro Section -->
        <section class="text-center space-y-4">
            <h2 class="text-3xl font-bold text-a10blue">ADC 概念與 A10 硬體/虛擬化介紹</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">
                歡迎來到 A10 網路架構師課程。今天我們不談生硬的指令，先來搞懂為什麼現代資料中心需要 ADC (Application Delivery Controller)，以及 A10 的 ACOS 系統究竟強在哪裡。
            </p>
        </section>

        <!-- 1. 核心概念 (Concept) -->
        <section id="concept" class="space-y-6">
            <div class="flex items-center space-x-3 border-l-4 border-a10accent pl-4">
                <h3 class="text-2xl font-bold text-a10blue">一、核心概念 (Concept)</h3>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Concept Definition -->
                <div class="card p-6 border-t-4 border-a10blue">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-a10blue mr-3">
                            <i class="fa-solid fa-book-open"></i>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800">一句話定義</h4>
                    </div>
                    <p class="text-gray-600 leading-relaxed">
                        <strong class="text-a10blue">ADC (Application Delivery Controller)</strong> 是傳統負載平衡器 (Load Balancer) 的進化版。它不僅僅負責分配流量，還整合了<strong class="text-gray-800">安全性 (WAF/DDoS)</strong>、<strong class="text-gray-800">加速 (SSL Offload/Compression)</strong> 與<strong class="text-gray-800">可視性</strong>，確保應用程式「快速」、「安全」且「隨時可用」。
                    </p>
                </div>

                <!-- Concept Analogy -->
                <div class="card p-6 border-t-4 border-a10orange">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-a10orange mr-3">
                            <i class="fa-solid fa-lightbulb"></i>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800">生活化比喻</h4>
                    </div>
                    <div class="space-y-3">
                        <p class="text-gray-600">
                            <span class="font-bold text-a10blue">傳統 Load Balancer 就像「交通警察」：</span><br>
                            他只負責看哪條路沒車，就指揮車子往哪走 (Round Robin)，但他不管車裡載的是好人還是壞人，也不管這輛車是不是超重。
                        </p>
                        <hr class="border-gray-200">
                        <p class="text-gray-600">
                            <span class="font-bold text-a10accent">ADC (A10 Thunder) 就像「國際機場航廈經理」：</span><br>
                            他不只引導旅客 (分流)，還設有<strong class="text-gray-800">安檢門 (WAF/Firewall)</strong> 檢查危險物品，有<strong class="text-gray-800">快速通關 (SSL 加速)</strong> 讓 VIP 先走，甚至還能幫你把行李壓縮打包 (Compression) 讓你走得更快。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. 運作原理 (Mechanism) -->
        <section id="mechanism" class="space-y-6">
            <div class="flex items-center space-x-3 border-l-4 border-a10accent pl-4">
                <h3 class="text-2xl font-bold text-a10blue">二、運作原理：ACOS 的秘密武器</h3>
            </div>

            <div class="card p-8">
                <h4 class="text-lg font-bold text-a10blue mb-4">為什麼 A10 的效能通常優於傳統架構？</h4>
                <p class="text-gray-600 mb-6">
                    這歸功於 <strong class="text-a10blue">ACOS (Advanced Core Operating System)</strong> 的核心設計。大多數傳統設備使用 IPC (Inter-Process Communication) 架構，CPU 核心之間需要頻繁「溝通」與「複製記憶體」，這在高流量時會造成瓶頸。
                </p>

                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h5 class="font-bold text-a10accent mb-2"><i class="fa-solid fa-microchip mr-2"></i>關鍵技術：Shared Memory (共享記憶體)</h5>
                        <ul class="list-disc list-outside ml-5 text-gray-600 space-y-2">
                            <li><strong>Zero-Copy (零複製)：</strong> 封包進入系統後，所有 CPU 核心都能直接存取同一塊記憶體區域，不需要將資料從 Core A 複製到 Core B。</li>
                            <li><strong>無鎖設計 (Lockless)：</strong> 透過精密的演算法，多個 CPU 核心同時讀寫也不會互相卡住 (Deadlock)，實現真正的線性擴展。</li>
                        </ul>
                    </div>
                    <div>
                        <h5 class="font-bold text-a10congress mb-2"><i class="fa-solid fa-server mr-2"></i>硬體與虛擬化型態</h5>
                        <ul class="list-disc list-outside ml-5 text-gray-600 space-y-2">
                            <li><strong>Thunder Series (Hardware)：</strong> 搭載專屬 FTA (Flexible Traffic ASIC) 晶片，專門硬體解密 SSL 與防禦 DDoS。</li>
                            <li><strong>vThunder (Virtual)：</strong> 運行在 VMware/KVM/Hyper-V 上，功能與硬體版一致。</li>
                            <li><strong>Bare Metal：</strong> 直接安裝在標準 x86 Server 上，無需 Hypervisor 層，效能更強。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. 架構視覺化 (Visuals) -->
        <section id="visuals" class="space-y-8">
            <div class="flex items-center space-x-3 border-l-4 border-a10accent pl-4">
                <h3 class="text-2xl font-bold text-a10blue">三、架構視覺化 (Visuals)</h3>
            </div>

            <!-- Graph 1: Legacy vs ACOS -->
            <div class="bg-white p-4 rounded-lg shadow border border-gray-200">
                <h4 class="text-center font-bold text-gray-700 mb-2">圖一：傳統架構 vs. ACOS 架構 (記憶體存取)</h4>
                <div class="mermaid">
                    graph TD
                    subgraph "傳統架構 (IPC 瓶頸)"
                        L_CPU1["CPU Core 1"] -- Copy --> L_MEM1[("Local Memory")]
                        L_MEM1 -. IPC/Locking .-> L_MEM2[("Local Memory")]
                        L_MEM2 -- Copy --> L_CPU2["CPU Core 2"]
                    end

                    subgraph "ACOS 架構 (Shared Memory)"
                        Shared[("Global Shared Memory")]
                        C1["CPU Core 1"] ==>|Zero Copy| Shared
                        C2["CPU Core 2"] ==>|Zero Copy| Shared
                        C3["CPU Core 3"] ==>|Zero Copy| Shared
                    end
                    
                    style L_MEM1 fill:#f9f9f9,stroke:#333
                    style L_MEM2 fill:#f9f9f9,stroke:#333
                    style Shared fill:#00529B,stroke:#fff,color:#fff
                </div>
                <p class="text-sm text-gray-500 text-center mt-2">ACOS 透過共享記憶體消除 IPC 延遲，實現多核心並行處理。</p>
            </div>

            <!-- Graph 2: ADC Function Flow -->
            <div class="bg-white p-4 rounded-lg shadow border border-gray-200">
                <h4 class="text-center font-bold text-gray-700 mb-2">圖二：ADC 流量處理流程 (邏輯視圖)</h4>
                <div class="mermaid">
                    %%{init: {'theme': 'neutral', 'themeVariables': { 'fontSize': '20px', 'actorFontSize': '24px', 'noteFontSize': '20px', 'messageFontSize': '22px' }}}%%
                    sequenceDiagram
                        participant User as 使用者 (Client)
                        participant VIP as ADC (Virtual IP)
                        participant SSL as SSL Offload Engine
                        participant WAF as WAF/Security Module
                        participant LB as Load Balancing Logic
                        participant Server as 後端伺服器 (Real Server)

                        User->>VIP: 1. 發送 HTTPS 請求 (Encrypted)
                        VIP->>SSL: 2. 硬體解密 (SSL Termination)
                        SSL-->>VIP: 解密後流量 (Plain Text)
                        VIP->>WAF: 3. 檢查惡意攻擊 (SQLi/XSS)
                        alt 攻擊檢測
                            WAF-->>User: Block / Reset
                        else 安全流量
                            WAF->>LB: 4. 選擇最佳伺服器 (RR/Least Conn)
                            LB->>Server: 5. 轉發請求 (Source NAT)
                            Server-->>LB: 6. 回傳回應
                            LB->>SSL: 7. 加密回應
                            SSL-->>User: 8. 回傳 HTTPS 回應
                        end
                </div>
            </div>
        </section>

        <!-- 4. 實務應用場景 (Use Case) -->
        <section id="usecase" class="space-y-6">
            <div class="flex items-center space-x-3 border-l-4 border-a10accent pl-4">
                <h3 class="text-2xl font-bold text-a10blue">四、實務應用場景</h3>
            </div>

            <div class="card overflow-hidden">
                <div class="bg-a10blue px-6 py-4">
                    <h4 class="text-white font-bold text-lg"><i class="fa-solid fa-briefcase mr-2"></i>案例：電商平台「雙 11」大促銷</h4>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <strong class="text-gray-800">情境描述：</strong>
                        <p class="text-gray-600 mt-1">
                            某大型電商在雙 11 期間流量暴增 10 倍，且面臨競爭對手的 DDoS 攻擊，同時所有交易必須透過 HTTPS 加密。
                        </p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 p-4 rounded border border-blue-100">
                            <h5 class="font-bold text-a10congress mb-2">A10 ADC 解決方案</h5>
                            <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                                <li><strong>SSL Offload：</strong> 由 A10 硬體晶片處理加密，釋放 Web Server 30% 以上的 CPU 資源。</li>
                                <li><strong>Connection Reuse：</strong> 減少後端 Server 建立 TCP 連線的次數 (Multiplexing)。</li>
                                <li><strong>DDoS Protection：</strong> 在應用層直接過濾 SYN Flood 攻擊。</li>
                            </ul>
                        </div>
                        <div class="bg-gray-50 p-4 rounded border border-gray-200">
                            <h5 class="font-bold text-gray-700 mb-2">優缺點分析</h5>
                            <div class="flex justify-between text-sm">
                                <div class="w-1/2 pr-2">
                                    <span class="text-green-600 font-bold"><i class="fa-solid fa-check mr-1"></i>優點</span>
                                    <p class="text-gray-600 mt-1">極大提升伺服器處理能力，單一入口管理憑證更安全。</p>
                                </div>
                                <div class="w-1/2 pl-2 border-l border-gray-300">
                                    <span class="text-red-500 font-bold"><i class="fa-solid fa-xmark mr-1"></i>缺點</span>
                                    <p class="text-gray-600 mt-1">架構較複雜，故障排除需具備網路與七層協定知識。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. 隨堂測驗 (Quiz) -->
        <section id="quiz" class="space-y-6 mb-12">
            <div class="flex items-center space-x-3 border-l-4 border-a10accent pl-4">
                <h3 class="text-2xl font-bold text-a10blue">五、隨堂測驗 (Quiz)</h3>
            </div>

            <div id="quiz-container" class="space-y-6">
                <!-- Questions will be injected here by JS -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-a10blue text-white py-6 mt-auto border-t-4 border-a10accent">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm font-light tracking-wider">
                Planning & Design by Timmy(timmyc@hauman.com.tw) | 豪勉科技 Hauman Technologies Corporation | Ver 1.0
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Mermaid Init with explicit security level to prevent blocking in some browsers
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: 'neutral',
            securityLevel: 'loose'
        });

        // Quiz Data
        const quizData = [
            {
                question: "1. ADC 與傳統 Load Balancer 最大的區別是什麼？",
                options: ["ADC 比較便宜", "ADC 僅支援 Layer 2 轉發", "ADC 整合了安全性、加速與應用優化功能", "兩者完全一樣，只是行銷名詞不同"],
                correct: 2,
                explanation: "ADC (Application Delivery Controller) 不僅分配流量，還提供 SSL 加速、WAF 防護、壓縮等高階功能，這就像從交通警察升級為機場管理者。"
            },
            {
                question: "2. A10 ACOS 系統的核心架構優勢是使用了什麼技術？",
                options: ["Shared Memory (共享記憶體) 架構", " IPC (跨程序通訊)", "單核心處理", "依賴 Windows Server"],
                correct: 0,
                explanation: "ACOS 採用 Shared Memory 架構，允許所有 CPU 核心零複製(Zero-copy)存取資料，避免了傳統 IPC 的鎖定與複製延遲。"
            },
            {
                question: "3. 在我們提到的生活化比喻中，傳統 Load Balancer 被比喻為什麼？",
                options: ["機場安檢人員", "交通警察", "圖書館管理員", "郵差"],
                correct: 1,
                explanation: "傳統 Load Balancer 就像交通警察，主要負責看路況指揮車流 (Round Robin)，而不深入檢查內容。"
            },
            {
                question: "4. 下列何者「不是」使用 ADC 進行 SSL Offload 的好處？",
                options: ["減輕後端 Server 的 CPU 負擔", "集中管理憑證，提升安全性", "可以檢查加密流量內的惡意攻擊", "讓駭客更容易竊取資料"],
                correct: 3,
                explanation: "SSL Offload 是為了更安全且高效地處理加密流量。解密後才能進行 WAF 檢查，且憑證集中管理反而更安全，不會讓駭客更容易竊取。"
            },
            {
                question: "5. A10 的硬體加速晶片 (ASIC) 主要用來處理什麼任務？",
                options: ["儲存硬碟資料", "產生報表", "處理 SSL 加解密與防禦 DDoS", "管理電源"],
                correct: 2,
                explanation: "A10 的 FTA (Flexible Traffic ASIC) 與 SSL 加速晶片專門用於處理高運算量的 SSL 加解密與大量封包攻擊，釋放主 CPU 效能。"
            }
        ];

        // Render Quiz
        const quizContainer = document.getElementById('quiz-container');

        quizData.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'card p-6';
            
            let optionsHtml = '';
            item.options.forEach((opt, optIndex) => {
                optionsHtml += `
                    <button class="option-btn w-full text-left p-3 rounded border border-gray-200 mb-2 hover:bg-blue-50 focus:outline-none" 
                            onclick="checkAnswer(${index}, ${optIndex}, this)">
                        ${String.fromCharCode(65 + optIndex)}. ${opt}
                    </button>
                `;
            });

            card.innerHTML = `
                <h4 class="font-bold text-lg text-gray-800 mb-4">${item.question}</h4>
                <div class="mb-4">${optionsHtml}</div>
                <div id="feedback-${index}" class="hidden p-4 rounded bg-gray-100 border-l-4">
                    <p class="font-bold message"></p>
                    <p class="text-sm text-gray-600 mt-2"><i class="fa-solid fa-circle-info mr-1"></i>解析：${item.explanation}</p>
                </div>
            `;
            quizContainer.appendChild(card);
        });

        function checkAnswer(qIndex, selectedOptIndex, btnElement) {
            const feedbackEl = document.getElementById(`feedback-${qIndex}`);
            const messageEl = feedbackEl.querySelector('.message');
            const allBtns = btnElement.parentElement.querySelectorAll('button');
            
            // Disable buttons after selection
            allBtns.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            });

            // Highlight selected
            btnElement.classList.remove('opacity-50');
            btnElement.classList.add('selected');

            feedbackEl.classList.remove('hidden');

            if (selectedOptIndex === quizData[qIndex].correct) {
                feedbackEl.classList.add('bg-green-50', 'border-green-500');
                messageEl.innerHTML = '<span class="text-green-700"><i class="fa-solid fa-check-circle mr-2"></i>答對了！</span>';
            } else {
                feedbackEl.classList.add('bg-red-50', 'border-red-500');
                messageEl.innerHTML = `<span class="text-red-700"><i class="fa-solid fa-times-circle mr-2"></i>答錯了。正確答案是 (${String.fromCharCode(65 + quizData[qIndex].correct)})</span>`;
            }
        }
    </script>
</body>
</html>